(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7346],{30691:function(e,t,n){"use strict";n.d(t,{fv:function(){return c},Hr:function(){return l}});n(59688),n(67294);var r=n(29163),i=n(84501),s=n(88891),a=n(74891),o=n(85893),c=(r.ZP.div.withConfig({displayName:"styleds__Wrapper",componentId:"sc-17ntwt8-0"})(["position:relative;padding:1rem;"]),(0,r.ZP)(a.ZT).withConfig({displayName:"styleds__ClickableText",componentId:"sc-17ntwt8-1"})([":hover{cursor:pointer;}"]),r.ZP.div.withConfig({displayName:"styleds__ArrowWrapper",componentId:"sc-17ntwt8-2"})(["padding:2px;",""],(function(e){return e.clickable?(0,r.iv)([":hover{cursor:pointer;opacity:0.8;}"]):null})),r.ZP.div.withConfig({displayName:"styleds__SectionBreak",componentId:"sc-17ntwt8-3"})(["height:1px;width:100%;"]),r.ZP.div.withConfig({displayName:"styleds__BottomGrouping",componentId:"sc-17ntwt8-4"})(["margin-top:2rem;"]));(0,r.ZP)(a.ZT).withConfig({displayName:"styleds__ErrorText",componentId:"sc-17ntwt8-5"})(["color:",";"],(function(e){var t=e.theme,n=e.severity;return 3===n||4===n?t.red1:2===n?t.yellow2:1===n?t.text3:t.green1})),r.ZP.button.withConfig({displayName:"styleds__StyledBalanceMaxMini",componentId:"sc-17ntwt8-6"})(["height:22px;width:22px;border:none;border-radius:50%;padding:0.2rem;font-size:0.875rem;font-weight:400;margin-left:0.4rem;cursor:pointer;display:flex;justify-content:center;align-items:center;float:right;:hover{}:focus{outline:none;}"]),r.ZP.span.withConfig({displayName:"styleds__Dots",componentId:"sc-17ntwt8-7"})(["&::after{display:inline-block;animation:ellipsis 1.25s infinite;content:'.';width:1em;text-align:left;}@keyframes ellipsis{0%{content:'.';}33%{content:'..';}66%{content:'...';}}"]);function l(e){var t=e.error;return(0,o.jsxs)("div",{className:"flex items-center justify-center pt-6 text-red",children:[(0,o.jsx)(i.Z,{size:16}),(0,o.jsx)("div",{className:"ml-4 text-sm",children:t})]})}(0,r.ZP)(s.ZP).withConfig({displayName:"styleds__StyledSlider",componentId:"sc-17ntwt8-8"})(["margin:0.8rem auto 2rem auto;width:95% !important;.rc-slider-mark-text{color:#575757;}.rc-slider-mark-text-active{color:#7f7f7f;}.rc-slider-rail{background-color:#202231;}.rc-slider-track{background:linear-gradient(to right,#27b0e6,#fa52a0);}.rc-slider-handle{border-color:#fa52a0;}.rc-slider-handle:hover{border-color:#fa52a0;}.rc-slider-handle-click-focused:focus{border-color:#fa52a0;}.rc-slider-dot-active{border-color:#fa52a0;}"])},69896:function(e,t,n){"use strict";n.d(t,{pM:function(){return f},ht:function(){return h}});var r=n(80318),i=n(99548),s=n(84501),a=(n(67294),n(74891)),o=n(33646),c=n(28269),l=n(13369),d=n(20181),u=n(85893),m=function(e){var t=e.onDismiss,n=e.pendingText,i=(0,d.m$)(),s=(0,r.Z)(i,1)[0];return(0,u.jsxs)("div",{children:[(0,u.jsx)("div",{className:"flex justify-end",children:(0,u.jsx)(a.Tw,{onClick:t})}),(0,u.jsx)("div",{className:"w-24 pb-4 m-auto flex justify-center",children:(0,u.jsxs)("svg",{className:"animate-spin",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,u.jsx)("circle",{className:"opacity-30",cx:"12",cy:"12",r:"10",stroke:"#6E67B6",strokeWidth:"4"}),(0,u.jsx)("path",{className:"opacity-75",fill:s?"#231E58":"#F3F2FF",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}),(0,u.jsxs)("div",{className:"flex flex-col items-center justify-center gap-3",children:[(0,u.jsx)("div",{className:"sm:text-xl text-lg font-semibold text-alabaster dark:text-port-gore",children:"Waiting for Confirmation"}),(0,u.jsx)("div",{className:"sm:text-base text-xs text-alabaster dark:text-port-gore",children:n}),(0,u.jsx)("div",{className:"sm:text-sm text-xs font-bold text-alabaster dark:text-port-gore",children:"Confirm this transaction in your wallet."}),(0,u.jsx)("div",{className:"sm:text-sm text-xs font-bold text-alabaster dark:text-port-gore -mt-3",children:"You can close this dialog after confirming."})]})]})},x=function(e){var t,n=e.onDismiss,r=e.chainId,s=e.hash,d=e.currencyToAdd,m=(0,c.a)().library,x=(0,l.Z)(d),f=x.addToken,h=x.success;return(0,u.jsxs)("div",{children:[(0,u.jsx)("div",{className:"flex justify-end hover:text-alabaster dark:hover:text-port-gore",children:(0,u.jsx)(a.Tw,{onClick:n})}),(0,u.jsx)("div",{className:"w-24 pb-4 m-auto",children:(0,u.jsx)(i.Z,{strokeWidth:.5,size:90,className:"text-blue"})}),(0,u.jsxs)("div",{className:"flex flex-col items-center justify-center gap-1",children:[(0,u.jsx)("div",{className:"sm:text-xl text-lg font-bold text-alabaster dark:text-port-gore",children:"Transaction Submitted"}),r&&s&&(0,u.jsx)(a.dL,{href:(0,o.E)(r,s,"transaction"),children:(0,u.jsx)("div",{className:"font-bold text-blue sm:text-base text-sm",children:"View on explorer"})}),d&&(null===m||void 0===m||null===(t=m.provider)||void 0===t?void 0:t.isMetaMask)&&(0,u.jsx)(a.zx,{variant:"gradient",onClick:f,className:"w-auto mt-4 font-semibold",children:h?(0,u.jsxs)(a.bs,{children:["Added ",d.symbol]}):(0,u.jsxs)(a.bs,{className:"mx-auto space-x-2",children:[(0,u.jsx)("span",{children:"Add ".concat(d.symbol," to MetaMask")}),(0,u.jsx)("img",{src:"/images/wallets/metamask.png",alt:"Add ".concat(d.symbol," to MetaMask"),width:20,height:20,className:"ml-1"})]})})]})]})},f=function(e){var t=e.title,n=e.bottomContent,r=e.onDismiss,i=e.topContent;return(0,u.jsxs)("div",{className:"grid gap-4",children:[(0,u.jsx)(a.xB,{title:t,onClose:r}),i(),n()]})},h=function(e){var t=e.message,n=e.onDismiss;return(0,u.jsxs)("div",{className:"grid gap-6",children:[(0,u.jsxs)("div",{children:[(0,u.jsxs)("div",{className:"flex justify-between",children:[(0,u.jsx)("div",{className:"text-lg font-medium text-alabaster",children:"Error"}),(0,u.jsx)(a.Tw,{onClick:n})]}),(0,u.jsxs)("div",{className:"flex flex-col items-center justify-center gap-3",children:[(0,u.jsx)(s.Z,{className:"text-red",style:{strokeWidth:1.5},size:64}),(0,u.jsx)("div",{className:"font-bold text-red",children:t})]})]}),(0,u.jsx)("div",{children:(0,u.jsx)(a.zx,{color:"gradient",size:"lg",onClick:n,children:"Dismiss"})})]})};t.ZP=function(e){var t=e.isOpen,n=e.onDismiss,r=e.attemptingTxn,i=e.hash,s=e.pendingText,o=e.content,l=e.currencyToAdd,d=(0,c.a)().chainId;return d?(0,u.jsx)(a.u_,{isOpen:t,onDismiss:n,maxHeight:90,maxWidth:500,children:r?(0,u.jsx)(m,{onDismiss:n,pendingText:s}):i?(0,u.jsx)(x,{chainId:d,hash:i,onDismiss:n,currencyToAdd:l}):t?o():null}):null}},67783:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return S}});var r=n(74891),i=n(9008),s=n(30691),a=n(66269),o=n(82417),c=n(29268),l=n(67294),d=n(82989),u=n(28269),m=n(1427),x=n(26367),f=n(30879),h=n(73574),p=n(72319),v=n(2593),g=n(77616),b=n(56371);function w(){return(0,c.C)((function(e){return e.communityPool}))}function y(){var e=(0,u.a)().account,t=w(),n=t.typedValue,r=t.currencyId,i=(0,a.U8)(r),s=(0,p.K5)(null!==e&&void 0!==e?e:void 0,[null!==i&&void 0!==i?i:void 0]),o=function(){var e,t=(0,m.mi)(),n=(0,u.a)(),r=n.account,i=n.chainId,s=null===(e=(0,f.Wk)(t,"getBalance",[r,h.tf]).result)||void 0===e?void 0:e[0],a=s?x.QA.BigInt(s.toString()):void 0,o=h.B5[i];return a?x.ih.fromRawAmount(o,a):void 0}(),c=function(){var e,t=(0,m.mi)(),n=(0,u.a)(),r=n.account,i=n.chainId,s=null===(e=(0,f.Wk)(t,"getRecommendedRechargeAmount",[(0,b.keccak256)((0,b.toUtf8Bytes)(h.tf)),r]).result)||void 0===e?void 0:e[0],a=s?x.QA.BigInt(s.toString()):void 0,o=h.B5[i];return a?x.ih.fromRawAmount(o,a):void 0}(),l=(0,d.e)(n,i),y=v.O$.from(0);try{y=n&&""!==n&&i?g.parseUnits(n,i.decimals):v.O$.from(0)}catch(I){}var j,N,C,k,T=s[0];(e||(j="Connect Wallet",N="Connect Wallet"),l)||(j=null!==(C=j)&&void 0!==C?C:"Enter an amount",N=null!==(k=N)&&void 0!==k?k:"Enter an amount");return T&&l&&l.greaterThan(T)&&(j="Insufficient ".concat(i.symbol," balance")),o&&l&&o.lessThan(l)&&(console.error("withdrawl error"),N="Insufficient community pool balance"),{currency:i,currencyBalance:T,communityPoolBalance:o,parsedAmount:l,rechargeAmount:c,weiAmountBn:y,inputErrorReimbursement:j,inputErrorWithdrawal:N}}var j,N=n(55517),C=n(92809),k=n(30266),T=n(809),I=n.n(T),A=n(99123);function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function D(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){(0,C.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function W(e){var t=(0,u.a)(),n=t.account,r=t.chainId,i=t.library,s=(0,A.h7)(),a=function(e){var t=(0,u.a)(),n=t.account,r=t.chainId,i=t.library,s=(0,m.mi)();return(0,l.useMemo)((function(){return i&&n&&r&&e&&s?e.shouldWithdraw?{address:s.address,calldata:s.interface.encodeFunctionData("withdrawFunds",[h.tf,e.amount])}:{address:s.address,calldata:s.interface.encodeFunctionData("rechargeUserWallet",[h.tf,n]),value:e.amount.toHexString()}:null}),[n,r,i,s,e])}(e);return(0,l.useMemo)((function(){return i&&n&&r?{state:j.VALID,callback:function(){var t=(0,k.Z)(I().mark((function t(){var r,o,c;return I().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a.address,o=a.calldata,c=a.value,t.abrupt("return",i.getSigner().sendTransaction(D({from:n,to:r,data:o,gasPrice:void 0,gasLimit:15e4},c&&!(0,x.Fr)(c)?{value:c}:{})).then(function(){var t=(0,k.Z)(I().mark((function t(n){var r,i,a;return I().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.currency.symbol,i=e.inputAmount.toSignificant(4),a=e.shouldWithdraw?"Withdraw ".concat(i," ").concat(r," from the community pool."):"Wallet funded with ".concat(i," ").concat(r,"."),s(n,{summary:a}),t.next=6,n.wait();case 6:return t.abrupt("return",n);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){throw 4001===(null===e||void 0===e?void 0:e.code)?new Error("Transaction rejected."):new Error("Wallet reimbursement failed: ".concat(e))})));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),error:null}:{state:j.INVALID,callback:null,error:"Missing dependencies"}}),[i,n,r,a])}!function(e){e[e.INVALID=0]="INVALID",e[e.LOADING=1]="LOADING",e[e.VALID=2]="VALID"}(j||(j={}));var _=n(69896),M=n(85893);function O(e){var t=e.data,n=e.onConfirm,i=e.errorMessage;return(0,M.jsxs)("div",{className:"p-6 mt-0 -m-6 rounded bg-black-russian dark:bg-light",children:[(0,M.jsx)(r.Kd,{onClick:n,id:"confirm-bridge-or-send",className:"sm:text-base text-sm font-medium",children:t.shouldWithdraw?"Confirm withdrawal":"Confirm deposit"}),i?(0,M.jsx)(s.Hr,{error:i}):null]})}function P(e){var t=e.data,n=(e.recipient,(0,N.N)(t.inputAmount));return(0,M.jsx)("div",{className:"grid gap-4",children:(0,M.jsx)("div",{className:"grid gap-2",children:(0,M.jsxs)("div",{className:"flex items-center justify-between",children:[(0,M.jsxs)("div",{className:"flex items-center gap-3",children:[(0,M.jsx)(r.Xw,{currency:t.currency,size:48}),(0,M.jsxs)("div",{className:"overflow-ellipsis w-[220px] overflow-hidden font-bold text-lg text-alabaster dark:text-port-gore",children:[t.inputAmount.toSignificant(6),n]})]}),(0,M.jsx)("div",{className:"font-medium text-alabaster dark:text-port-gore",children:t.currency.symbol})]})})})}function B(e){var t,n,r=e.reimbursementData,i=e.onConfirm,s=e.onDismiss,a=e.recipient,o=e.reimbursementErrorMessage,c=e.isOpen,d=e.attemptingTxn,u=e.txHash,m=(0,l.useCallback)((function(){return r?(0,M.jsx)(P,{data:r,recipient:a}):null}),[a,r]),x=(0,l.useCallback)((function(){return r?(0,M.jsx)(O,{onConfirm:i,data:r,errorMessage:o}):null}),[i,o,r]),f=null!==r&&void 0!==r&&r.shouldWithdraw?"Withdraw ETH from gas wallet":"Deposit ".concat(null===r||void 0===r||null===(t=r.inputAmount)||void 0===t?void 0:t.toSignificant(6)," ").concat(null===r||void 0===r||null===(n=r.currency)||void 0===n?void 0:n.symbol," into Gas Wallet"),h=(0,l.useCallback)((function(){return o?(0,M.jsx)(_.ht,{onDismiss:s,message:o}):(0,M.jsx)(_.pM,{title:null!==r&&void 0!==r&&r.shouldWithdraw?"Confirm withdrawal":"Confirm deposit",onDismiss:s,topContent:m,bottomContent:x})}),[s,x,m,o]);return(0,M.jsx)(_.ZP,{isOpen:c,onDismiss:s,attemptingTxn:d,hash:u,content:h,pendingText:f})}var Z=function(){return(0,M.jsx)("div",{className:"flex justify-between mb-8 space-x-3 items-center",children:(0,M.jsxs)("div",{className:"grid grid-cols-1 rounded p-3px h-[46px] space-y-3",children:[(0,M.jsx)(r.eJ,{}),(0,M.jsx)("h2",{className:"flex items-center font-semibold justify-center text-center sm:text-2xl text-xl text-alabaster dark:text-port-gore hover:text-alabaster",children:"Gas Wallet info"})]})})};function H(){var e,t,n=(0,u.a)(),d=n.account,m=(n.chainId,n.library,(0,a.U8)("ETH")),x=w(),f=x.typedValue,h=(x.currencyId,y()),p=h.currency,v=h.currencyBalance,g=h.communityPoolBalance,b=h.parsedAmount,j=h.rechargeAmount,C=h.weiAmountBn,k=h.inputErrorReimbursement,T=h.inputErrorWithdrawal,I=(0,N.N)(b),A=function(){var e=(0,c.T)();return{onUserInput:(0,l.useCallback)((function(t){e((0,o.L)({typedValue:t}))}),[e])}}().onUserInput,E=!k,D=!T,_=(0,l.useCallback)((function(e){A(e)}),[A]),O=(0,l.useState)({showConfirm:!1,reimbursementToConfirm:void 0,attemptingTxn:!1,reimbursementErrorMessage:void 0,txHash:void 0}),P=O[0],H=P.showConfirm,S=P.reimbursementToConfirm,V=P.reimbursementErrorMessage,z=P.attemptingTxn,L=P.txHash,F=O[1],R=f,U=(0,l.useCallback)((function(){F({showConfirm:!1,reimbursementToConfirm:S,attemptingTxn:z,reimbursementErrorMessage:V,txHash:L}),L&&A("")}),[z,A,V,S,L]),G=g,K=Boolean((null===G||void 0===G?void 0:G.greaterThan(0))&&((null===b||void 0===b?void 0:b.lessThan(G))||!b)),X=(0,l.useCallback)((function(){G&&A(G.toExact())}),[G,A]),$=W(S),J=$.callback,Q=$.error,Y=(0,l.useCallback)((function(){J&&(F({attemptingTxn:!0,reimbursementToConfirm:S,showConfirm:H,reimbursementErrorMessage:void 0,txHash:void 0}),J().then((function(e){F({attemptingTxn:!1,reimbursementToConfirm:S,showConfirm:H,reimbursementErrorMessage:void 0,txHash:e.hash})})).catch((function(e){F({attemptingTxn:!1,reimbursementToConfirm:S,showConfirm:H,reimbursementErrorMessage:e.message,txHash:void 0})})))}),[J,S,H,d,null===S||void 0===S||null===(e=S.currency)||void 0===e?void 0:e.symbol]);return(0,M.jsxs)(r.W2,{id:"reimburse-wallet-page",className:"py-4 md:py-8 lg:py-12 lg:px-0 px-5",maxWidth:"2xl",children:[(0,M.jsxs)(i.default,{children:[(0,M.jsx)("title",{children:"Community Pool Wallet Reimbursement | Ruby.Exchange"}),(0,M.jsx)("meta",{name:"description",content:"The reimbursement wallet feature allows you to load up your wallet with funds, which allows for bridging back from the sChain."},"description")]}),(0,M.jsxs)("div",{className:"py-4 space-y-4 rounded z-1",children:[(0,M.jsx)(Z,{}),(null===j||void 0===j?void 0:j.greaterThan(0))&&(0,M.jsx)(r.bZ,{message:"To ensure a successful withdrawal transaction, it is suggested that you deposit ".concat(null!==(t=null===j||void 0===j?void 0:j.toFixed(3))&&void 0!==t?t:0," more ETH to your\n          Gas Wallet. Once exit completes, you can withdraw the remaining balance."),type:"error"}),(0,M.jsx)(B,{isOpen:H,reimbursementData:S,attemptingTxn:z,txHash:L,onConfirm:Y,reimbursementErrorMessage:V,recipient:d,onDismiss:U}),(0,M.jsx)("div",{children:(0,M.jsx)(r.nA,{value:R,showMaxButton:K,currency:p,onUserInput:_,onMax:X,maxButtonText:"Withdraw All",fiatValue:null!==I&&void 0!==I?I:void 0,currencyBalance:v,communityPoolBalance:g,id:"reimburse-wallet-currency-input"})}),(0,M.jsx)("div",{className:"block",children:(0,M.jsx)(s.fv,{children:d?(0,M.jsx)("div",{children:(0,M.jsxs)(r.m0,{children:[(0,M.jsx)(r.Kd,{onClick:function(){F({reimbursementToConfirm:{currency:m,amount:C,inputAmount:b,shouldWithdraw:!1},attemptingTxn:!1,reimbursementErrorMessage:void 0,showConfirm:!0,txHash:void 0})},id:"reimburse",disabled:!E||!!Q,error:E&&!Q,variant:"seance",className:"mx-2 sm:text-base text-sm",children:"Deposit"}),(0,M.jsx)(r.Kd,{onClick:function(){F({reimbursementToConfirm:{currency:m,amount:C,inputAmount:b,shouldWithdraw:!0},attemptingTxn:!1,reimbursementErrorMessage:void 0,showConfirm:!0,txHash:void 0})},id:"withdraw",disabled:!D||!!Q,error:D&&!Q,className:"mx-2",variant:"orange",children:"Withdraw"})]})}):(0,M.jsx)(r.ck,{className:"w-full font-semibold sm:text-base text-sm"})})})]})]})}H.Guard=(0,r.hJ)([x.a_.MAINNET]);var S=H},93644:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/communityPoolStats",function(){return n(67783)}])}},function(e){e.O(0,[2894,9774,2888,179],(function(){return t=93644,e(e.s=t);var t}));var t=e.O();_N_E=t}]);