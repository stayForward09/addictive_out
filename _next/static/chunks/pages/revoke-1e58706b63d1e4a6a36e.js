(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3349],{47248:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(30879),s=n(1427);function i(){var e,t,n=(0,s.gq)();return null===(e=(0,r.Wk)(n,"getCurrentBlockTimestamp"))||void 0===e||null===(t=e.result)||void 0===t?void 0:t[0]}},69896:function(e,t,n){"use strict";n.d(t,{pM:function(){return p},ht:function(){return f}});var r=n(80318),s=n(99548),i=n(84501),a=(n(67294),n(74891)),o=n(33646),c=n(28269),l=n(13369),d=n(20181),u=n(85893),x=function(e){var t=e.onDismiss,n=e.pendingText,s=(0,d.m$)(),i=(0,r.Z)(s,1)[0];return(0,u.jsxs)("div",{children:[(0,u.jsx)("div",{className:"flex justify-end",children:(0,u.jsx)(a.Tw,{onClick:t})}),(0,u.jsx)("div",{className:"w-24 pb-4 m-auto flex justify-center",children:(0,u.jsxs)("svg",{className:"animate-spin",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,u.jsx)("circle",{className:"opacity-30",cx:"12",cy:"12",r:"10",stroke:"#6E67B6",strokeWidth:"4"}),(0,u.jsx)("path",{className:"opacity-75",fill:i?"#231E58":"#F3F2FF",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}),(0,u.jsxs)("div",{className:"flex flex-col items-center justify-center gap-3",children:[(0,u.jsx)("div",{className:"sm:text-xl text-lg font-semibold text-alabaster dark:text-port-gore",children:"Waiting for Confirmation"}),(0,u.jsx)("div",{className:"sm:text-base text-xs text-alabaster dark:text-port-gore",children:n}),(0,u.jsx)("div",{className:"sm:text-sm text-xs font-bold text-alabaster dark:text-port-gore",children:"Confirm this transaction in your wallet."}),(0,u.jsx)("div",{className:"sm:text-sm text-xs font-bold text-alabaster dark:text-port-gore -mt-3",children:"You can close this dialog after confirming."})]})]})},m=function(e){var t,n=e.onDismiss,r=e.chainId,i=e.hash,d=e.currencyToAdd,x=(0,c.a)().library,m=(0,l.Z)(d),p=m.addToken,f=m.success;return(0,u.jsxs)("div",{children:[(0,u.jsx)("div",{className:"flex justify-end hover:text-alabaster dark:hover:text-port-gore",children:(0,u.jsx)(a.Tw,{onClick:n})}),(0,u.jsx)("div",{className:"w-24 pb-4 m-auto",children:(0,u.jsx)(s.Z,{strokeWidth:.5,size:90,className:"text-blue"})}),(0,u.jsxs)("div",{className:"flex flex-col items-center justify-center gap-1",children:[(0,u.jsx)("div",{className:"sm:text-xl text-lg font-bold text-alabaster dark:text-port-gore",children:"Transaction Submitted"}),r&&i&&(0,u.jsx)(a.dL,{href:(0,o.E)(r,i,"transaction"),children:(0,u.jsx)("div",{className:"font-bold text-blue sm:text-base text-sm",children:"View on explorer"})}),d&&(null===x||void 0===x||null===(t=x.provider)||void 0===t?void 0:t.isMetaMask)&&(0,u.jsx)(a.zx,{variant:"gradient",onClick:p,className:"w-auto mt-4 font-semibold",children:f?(0,u.jsxs)(a.bs,{children:["Added ",d.symbol]}):(0,u.jsxs)(a.bs,{className:"mx-auto space-x-2",children:[(0,u.jsx)("span",{children:"Add ".concat(d.symbol," to MetaMask")}),(0,u.jsx)("img",{src:"/images/wallets/metamask.png",alt:"Add ".concat(d.symbol," to MetaMask"),width:20,height:20,className:"ml-1"})]})})]})]})},p=function(e){var t=e.title,n=e.bottomContent,r=e.onDismiss,s=e.topContent;return(0,u.jsxs)("div",{className:"grid gap-4",children:[(0,u.jsx)(a.xB,{title:t,onClose:r}),s(),n()]})},f=function(e){var t=e.message,n=e.onDismiss;return(0,u.jsxs)("div",{className:"grid gap-6",children:[(0,u.jsxs)("div",{children:[(0,u.jsxs)("div",{className:"flex justify-between",children:[(0,u.jsx)("div",{className:"text-lg font-medium text-alabaster",children:"Error"}),(0,u.jsx)(a.Tw,{onClick:n})]}),(0,u.jsxs)("div",{className:"flex flex-col items-center justify-center gap-3",children:[(0,u.jsx)(i.Z,{className:"text-red",style:{strokeWidth:1.5},size:64}),(0,u.jsx)("div",{className:"font-bold text-red",children:t})]})]}),(0,u.jsx)("div",{children:(0,u.jsx)(a.zx,{color:"gradient",size:"lg",onClick:n,children:"Dismiss"})})]})};t.ZP=function(e){var t=e.isOpen,n=e.onDismiss,r=e.attemptingTxn,s=e.hash,i=e.pendingText,o=e.content,l=e.currencyToAdd,d=(0,c.a)().chainId;return d?(0,u.jsx)(a.u_,{isOpen:t,onDismiss:n,maxHeight:90,maxWidth:500,children:r?(0,u.jsx)(x,{onDismiss:n,pendingText:i}):s?(0,u.jsx)(m,{chainId:d,hash:s,onDismiss:n,currencyToAdd:l}):t?o():null}):null}},23318:function(e,t,n){"use strict";n.r(t);var r=n(92809),s=n(30266),i=n(80318),a=n(809),o=n.n(a),c=n(67294),l=n(9008),d=n(64260),u=n(74891),x=n(77044),m=n(26367),p=n(73574),f=n(90539),h=n(37526),g=n(30463),v=n(66269),j=n(89231),b=n(69896),y=n(99123),w=n(47248),k=n(20181),N=n(85893);function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function T(){var e=(0,x.Ge)(),t=e.account,n=e.chainId,r=e.library,a=(0,c.useState)([]),O=a[0],T=a[1],E=(0,c.useState)(null),M=E[0],A=E[1],P=(0,g.l9)(),D=(0,y.h7)(),z=(0,w.Z)(),R=(0,c.useState)(!0),_=R[0],Z=R[1],S=(0,k.m$)(),F=(0,i.Z)(S,1)[0],B=(0,c.useState)({showConfirm:!1,attemptingTxn:!1,errorMessage:void 0,txHash:void 0,pendingText:void 0}),W=B[0],H=W.showConfirm,L=W.errorMessage,I=W.attemptingTxn,X=W.txHash,U=W.pendingText,V=B[1],q=(0,c.useMemo)((function(){return v.mX[n]}),[n]);(0,c.useEffect)((function(){(function(){var e=(0,s.Z)(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.getCurrentLotto();case 2:t=e.sent,A(P&&n?{"Current Lottery":t,"Ruby Router":p.O6[n],"AMM (Liquidity Pool)":p.bR[n],"AMM (Factory)":p.F1[n],"Ruby MasterChef":p.Ey[n],"Stable Swap":j.p_[n],"DCA Factory":p.lU[n]}:null);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[P,n]),(0,c.useEffect)((function(){(function(){var e=(0,s.Z)(o().mark((function e(){var s,i,a,c,l,u,x,m,p,g,v,j;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n&&t&&r&&M){e.next=3;break}return T([]),e.abrupt("return");case 3:for(i in s=[],M)for(a in q)c=q[a].address,l=new d.CH(c,f.RB),u=M[i],s.push(l.allowance(t,u));return e.next=7,(0,h.y5)(r,n);case 7:if((x=e.sent)&&x.multicallAddress){e.next=10;break}return e.abrupt("return");case 10:return e.next=12,x.all(s,0);case 12:for(v in m=e.sent,p=0,g=[],M)for(j in q)0!=Number(m[p])&&g.push({token:q[j],allowance:Number(m[p]),spender:v,spenderAddress:M[v]}),p++;Z(!1),T(g);case 17:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[t,n,r,q,M,z]);var G=(0,c.useCallback)((function(){V({showConfirm:!1,attemptingTxn:I,errorMessage:L,txHash:X,pendingText:U})}),[I,L,X]),$=(0,c.useCallback)((function(){return L?(0,N.jsx)(b.ht,{onDismiss:G,message:L}):(0,N.jsx)(b.pM,{title:"Confirm",onDismiss:G,topContent:function(){return""},bottomContent:function(){return""}})}),[G,L]),J=function(){var e=(0,s.Z)(o().mark((function e(n,s){var i,a,c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return V((function(e){return C(C({},e),{},{showConfirm:!0,attemptingTxn:!0,pendingText:"Revoking ".concat(n.symbol," Token"),errorMessage:null})})),e.prev=1,i=(0,m.uN)(n.address,f.RB,r,t),e.next=5,i.approve(s,0,{gasPrice:1e5,gasLimit:5e4});case 5:return a=e.sent,c="Revoking ".concat(n.symbol," Token"),D(a,{summary:c}),e.next=10,a.wait();case 10:V((function(e){return C(C({},e),{},{showConfirm:!1,attemptingTxn:!1,txHash:a.hash})})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),4001===(null===e.t0||void 0===e.t0?void 0:e.t0.code)?V((function(e){return C(C({},e),{},{attemptingTxn:!1,errorMessage:"Transaction rejected."})})):V((function(t){return C(C({},t),{},{attemptingTxn:!1,errorMessage:"Revoke failed: ".concat(e.t0)})}));case 16:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t,n){return e.apply(this,arguments)}}();return(0,N.jsxs)(u.W2,{id:"revoke-page",className:"lg:pt-61px md:py-12 py-8 px-6",maxWidth:"7xl",children:[(0,N.jsxs)(l.default,{children:[(0,N.jsx)("title",{children:"Revoke | Ruby.Exchange"}),(0,N.jsx)("meta",{name:"description",content:"Revoke page"},"description")]}),(0,N.jsxs)("div",{className:"grid sm:grid-cols-4 grid-cols-2 sm:text-base text-sm font-normal dark:text-port-gore text-light px-3.5 rounded-box",children:[(0,N.jsx)("p",{children:"Asset"}),(0,N.jsx)("p",{className:"sm:ml-0 ml-auto",children:"Allowance"}),(0,N.jsx)("p",{children:"Approved Spender"}),(0,N.jsx)("p",{className:"ml-auto sm:mr-8",children:"Actions"})]}),(0,N.jsx)("div",{className:"flex flex-col gap-y-2.5 mt-6",children:_?(0,N.jsx)("div",{className:"w-24 pb-4 m-auto flex justify-center",children:(0,N.jsxs)("svg",{className:"animate-spin",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,N.jsx)("circle",{className:"opacity-30",cx:"12",cy:"12",r:"10",stroke:"#6E67B6",strokeWidth:"4"}),(0,N.jsx)("path",{className:"opacity-75",fill:F?"#231E58":"#F3F2FF",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}):O&&O.map((function(e,t){return(0,N.jsxs)("div",{className:"grid sm:grid-cols-4 grid-cols-2 border border-blue-violet p-3.5 font-medium sm:text-base text-sm dark:text-port-gore text-light items-center rounded hover:bg-port-gore dark:hover:bg-light",children:[(0,N.jsxs)("div",{className:"capitalize flex items-center gap-1",children:[(0,N.jsx)(u.Xw,{currency:e.token,size:"32px"}),e.token.symbol]}),(0,N.jsx)("p",{className:"sm:ml-0 ml-auto",children:e.allowance>Number(p.Bz)/2?"Infinity":e.allowance/Math.pow(10,e.token.decimals)}),(0,N.jsx)("p",{children:e.spender}),(0,N.jsx)("p",{className:"ml-auto",children:(0,N.jsx)(u.Kd,{onClick:function(){return J(e.token,e.spenderAddress)},className:"sm:text-base text-sm text-black-russian dark:text-white w-max",variant:"orange",children:"Revoke"})})]},t)}))}),(0,N.jsx)(b.ZP,{isOpen:H,onDismiss:G,attemptingTxn:I,content:$,pendingText:U})]})}T.Guard=(0,u.hJ)([m.a_.EUROPA]),t.default=T},54676:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/revoke",function(){return n(23318)}])},99548:function(e,t,n){"use strict";var r=n(67294),s=n(45697),i=n.n(s);function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function o(e,t){if(null==e)return{};var n,r,s=function(e,t){if(null==e)return{};var n,r,s={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}var c=(0,r.forwardRef)((function(e,t){var n=e.color,s=void 0===n?"currentColor":n,i=e.size,c=void 0===i?24:i,l=o(e,["color","size"]);return r.createElement("svg",a({ref:t,xmlns:"http://www.w3.org/2000/svg",width:c,height:c,viewBox:"0 0 24 24",fill:"none",stroke:s,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},l),r.createElement("circle",{cx:"12",cy:"12",r:"10"}),r.createElement("polyline",{points:"16 12 12 8 8 12"}),r.createElement("line",{x1:"12",y1:"16",x2:"12",y2:"8"}))}));c.propTypes={color:i().string,size:i().oneOfType([i().string,i().number])},c.displayName="ArrowUpCircle",t.Z=c}},function(e){e.O(0,[9774,2888,179],(function(){return t=54676,e(e.s=t);var t}));var t=e.O();_N_E=t}]);