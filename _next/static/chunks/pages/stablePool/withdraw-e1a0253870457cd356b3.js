(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3393],{60043:function(e,t,n){"use strict";n.d(t,{rn:function(){return l}});n(59688),n(67294);var r=n(29163),a=n(84501),o=n(88891),s=n(74891),i=n(85893);r.ZP.div.withConfig({displayName:"styleds__Wrapper",componentId:"sc-zj8gmh-0"})(["position:relative;padding:1rem;"]),(0,r.ZP)(s.ZT).withConfig({displayName:"styleds__ClickableText",componentId:"sc-zj8gmh-1"})([":hover{cursor:pointer;}"]),r.ZP.div.withConfig({displayName:"styleds__ArrowWrapper",componentId:"sc-zj8gmh-2"})(["padding:2px;",""],(function(e){return e.clickable?(0,r.iv)([":hover{cursor:pointer;opacity:0.8;}"]):null})),r.ZP.div.withConfig({displayName:"styleds__SectionBreak",componentId:"sc-zj8gmh-3"})(["height:1px;width:100%;"]),r.ZP.div.withConfig({displayName:"styleds__BottomGrouping",componentId:"sc-zj8gmh-4"})(["margin-top:2rem;"]),(0,r.ZP)(s.ZT).withConfig({displayName:"styleds__ErrorText",componentId:"sc-zj8gmh-5"})(["color:",";"],(function(e){var t=e.theme,n=e.severity;return 3===n||4===n?t.red1:2===n?t.yellow2:1===n?t.text3:t.green1})),r.ZP.button.withConfig({displayName:"styleds__StyledBalanceMaxMini",componentId:"sc-zj8gmh-6"})(["height:22px;width:22px;border:none;border-radius:50%;padding:0.2rem;font-size:0.875rem;font-weight:400;margin-left:0.4rem;cursor:pointer;display:flex;justify-content:center;align-items:center;float:right;:hover{}:focus{outline:none;}"]),r.ZP.span.withConfig({displayName:"styleds__Dots",componentId:"sc-zj8gmh-7"})(["&::after{display:inline-block;animation:ellipsis 1.25s infinite;content:'.';width:1em;text-align:left;}@keyframes ellipsis{0%{content:'.';}33%{content:'..';}66%{content:'...';}}"]);function l(e){var t=e.error;return(0,i.jsxs)("div",{className:"flex items-center justify-center pt-6 text-red",children:[(0,i.jsx)(a.Z,{size:16}),(0,i.jsx)("div",{className:"ml-4 text-sm",children:t})]})}(0,r.ZP)(o.ZP).withConfig({displayName:"styleds__StyledSlider",componentId:"sc-zj8gmh-8"})(["margin:0.8rem auto 2rem auto;width:95% !important;.rc-slider-mark-text{color:#575757;}.rc-slider-mark-text-active{color:#7f7f7f;}.rc-slider-rail{background-color:#202231;}.rc-slider-track{background:linear-gradient(to right,#27b0e6,#fa52a0);}.rc-slider-handle{border-color:#fa52a0;}.rc-slider-handle:hover{border-color:#fa52a0;}.rc-slider-handle-click-focused:focus{border-color:#fa52a0;}.rc-slider-dot-active{border-color:#fa52a0;}"])},93015:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return z}});var r=n(92809),a=n(30266),o=n(80318),s=n(809),i=n.n(s),l=n(74891),c=n(26367),u=n(67294),d=n(9008),p=n(73832),m=n(86154),f=n(89231),x=n(30463),h=n(2593),b=n(21046),g=n(77616),v=n(72319),k=n(24234),y=n(82989),w=n(69896),T=n(4878),j=n(96486);function N(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?N(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var O="IMBALANCE",S="ALL";var P=n(85893),C=function(e){var t=e.onConfirm,n=e.onClose,r=e.transactionData,a=(e.currency,(0,k.b)()),o=a.slippageCustom,s=a.slippageSelected,i=a.transactionDeadlineSelected,d=a.transactionDeadlineCustom,p=(0,u.useState)(!1),m=p[0],f=p[1],x=(0,T.Nq)(r.priceImpact),h=(0,c.wu)(i,d);return(0,P.jsxs)("div",{className:"grid gap-4",children:[(0,P.jsx)(l.xB,{title:"Review withdraw",onClose:n}),(0,P.jsxs)("div",{className:"rounded",children:[r.withdraw.length>0&&(0,P.jsxs)("div",{className:"grid gap-1",children:[(0,P.jsx)("div",{className:"sm:text-base text-sm text-alabaster dark:text-port-gore font-bold",children:"You will receive"}),(0,P.jsxs)("div",{className:"sm:text-sm text-xs font-semibold  text-alabaster dark:text-port-gore flex justify-between",children:[(0,P.jsxs)("p",{className:"flex justify-between items-center gap-x-1",children:[(0,P.jsx)(l.Xw,{currency:r.withdraw[0].poolToken}),r.withdraw[0].poolToken.symbol]}),(0,P.jsxs)("p",{children:[r.withdraw[0].value," "]})]}),r.withdraw.slice(1).map((function(e,t){var n=e.poolToken,r=e.value;return(0,P.jsx)("div",{className:"",children:(0,P.jsxs)("div",{className:"sm:text-sm text-xs font-semibold  text-alabaster dark:text-port-gore flex justify-between",children:[(0,P.jsxs)("p",{className:"flex justify-between items-center gap-x-1",children:[(0,P.jsx)(l.Xw,{currency:n}),n.symbol]}),(0,P.jsx)("p",{children:r})]})},t)}))]}),(0,P.jsx)("div",{className:"h-px my-6 bg-gray-700"}),(0,P.jsxs)("div",{className:"grid gap-1 pb-6",children:[(0,P.jsxs)("div",{className:"flex items-center justify-between",children:[(0,P.jsx)("div",{className:"sm:text-sm text-xs dark:text-port-gore text-alabaster",children:"Max slippage:"}),(0,P.jsx)("div",{className:"sm:text-sm text-xs font-semibold items-center text-alabaster dark:text-port-gore",children:(0,P.jsxs)("div",{children:[(0,T.it)(s,o),"%"]})})]}),(0,P.jsxs)("div",{className:"flex items-center justify-between",children:[(0,P.jsx)("div",{className:"sm:text-sm text-xs dark:text-port-gore text-alabaster",children:"Tx deadline:"}),(0,P.jsxs)("div",{className:"sm:text-sm text-xs font-semibold items-center text-alabaster dark:text-port-gore",children:[h," minutes"]})]}),r.rates.length>0&&(0,P.jsxs)(P.Fragment,{children:[(0,P.jsxs)("div",{className:"flex items-center justify-between",children:[(0,P.jsx)("div",{className:"sm:text-sm text-xs dark:text-port-gore text-alabaster",children:"Rates:"}),(0,P.jsxs)("div",{className:"sm:text-sm text-xs font-semibold items-center text-alabaster dark:text-port-gore",children:["1 ",r.rates[0].poolToken.symbol," = $",r.rates[0].rate]})]}),r.rates.slice(1).map((function(e,t){var n=e.poolToken,r=e.rate;return(0,P.jsx)("div",{className:"flex items-center justify-end",children:(0,P.jsxs)("div",{className:"sm:text-sm text-xs font-semibold items-center text-alabaster dark:text-port-gore",children:["1 ",n.symbol," = $",r]})},t)}))]})]})]}),(0,P.jsx)("p",{className:"text-xs text-alabaster dark:text-port-gore italic",children:"Output is estimated. If the price changes by more than the maximum slippage, your transaction will revert."}),x&&(0,P.jsx)(l.sz,{checked:m,onCheck:function(){f((function(e){return!e}))}}),(0,P.jsx)("div",{className:"p-6 mt-0 -m-6 rounded ",children:(0,P.jsx)(l.zx,{color:"gradient",size:"sm",onClick:t,disabled:x&&!m,className:"sm:text-base text-sm",children:"Confirm withdraw"})})]})},A=n(29268),_=n(99123),E=n(37526),U=n(57910),D=n(73052),Z=n(60043),M=n(41664),R=n(17704);function L(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function B(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?L(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):L(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function K(){var e=(0,x.aQ)(),t=e.chainId,n=e.account,s=f.YM[f.d_],N=(0,m.Ui)(f.d_),L=(0,o.Z)(N,2),K=L[0],z=L[1],W=function(e){var t=f.YM[e],n=(0,x.tZ)(e),s=(0,m.Ui)(e),l=(0,o.Z)(s,2)[1],d=(0,x.aQ)(),p=d.account,b=d.chainId,v=(0,u.useMemo)((function(){return t.poolTokens.reduce((function(e,t){return I(I({},e),{},(0,r.Z)({},t[b].symbol,(0,c.JQ)(t[b].decimals,h.O$.from("0"))))}),{})}),[t.poolTokens]),k=(0,u.useMemo)((function(){return t.poolTokens.reduce((function(e,t){return I(I({},e),{},(0,r.Z)({},t[b].symbol,v[t[b].symbol]("0.0")))}),{})}),[t.poolTokens,v]),y=(0,u.useMemo)((function(){return{percentage:"",tokenInputs:k,withdrawType:S,error:null,lpTokenAmountToSpend:h.O$.from("0")}}),[k]),w=(0,u.useState)(y),T=w[0],N=w[1],P=(0,u.useCallback)((0,j.debounce)(function(){var e=(0,a.Z)(i().mark((function e(a){var o,s,c,u,d,m,f,x;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=l&&null!=n&&null!=p){e.next=2;break}return e.abrupt("return");case 2:if(o=""===a.percentage?"0":null===a.percentage?"100":a.percentage,s=l.lpTokenBalance.mul(g.parseUnits(o,5)).div(Math.pow(10,7)),a.withdrawType!==O){e.next=18;break}return e.prev=5,e.next=8,n.calculateTokenAmount(t.poolTokens.map((function(e){return a.tokenInputs[e[b].symbol].valueSafe})),!1);case 8:u=e.sent,c=u.gt(s)?{error:{field:"tokenInputs",message:"Insufficient balance."},lpTokenAmountToSpend:h.O$.from("0")}:{error:null,lpTokenAmountToSpend:u},e.next=16;break;case 12:e.prev=12,e.t0=e.catch(5),console.error(e.t0),c={error:{field:"tokenInputs",message:"Insufficient balance in pool."},lpTokenAmountToSpend:h.O$.from("0")};case 16:e.next=49;break;case 18:if(a.withdrawType!==S){e.next=31;break}return e.prev=19,e.next=22,n.calculateRemoveLiquidity(s);case 22:d=e.sent,c={lpTokenAmountToSpend:s,tokenInputs:t.poolTokens.reduce((function(e,t,n){return I(I({},e),{},(0,r.Z)({},t[b].symbol,v[t[b].symbol](d[n])))}),{}),error:null},e.next=29;break;case 26:e.prev=26,e.t1=e.catch(19),c={error:{field:"tokenInputs",message:"Insufficient balance in pool."}};case 29:e.next=49;break;case 31:if(e.prev=31,!a.percentage){e.next=40;break}return m=t.poolTokens.findIndex((function(e){return e[b].symbol===a.withdrawType})),e.next=36,n.calculateRemoveLiquidityOneToken(s,m);case 36:f=e.sent,c={lpTokenAmountToSpend:s,tokenInputs:t.poolTokens.reduce((function(e,t,n){return I(I({},e),{},(0,r.Z)({},t[b].symbol,v[t[b].symbol](n===m?f:"0")))}),{}),error:null},e.next=44;break;case 40:return e.next=42,n.calculateTokenAmount(t.poolTokens.map((function(e){return a.tokenInputs[e[b].symbol].valueSafe})),!1);case 42:x=e.sent,c=x.gt(s)?{error:{field:"tokenInputs",message:"Insufficient balance."},lpTokenAmountToSpend:h.O$.from("0")}:{lpTokenAmountToSpend:x,error:null};case 44:e.next=49;break;case 46:e.prev=46,e.t2=e.catch(31),c={error:{field:"tokenInputs",message:"Insufficient balance in pool."}};case 49:N((function(e){return I(I({},e),c)}));case 50:case"end":return e.stop()}}),e,null,[[5,12],[19,26],[31,46]])})));return function(t){return e.apply(this,arguments)}}(),250),[l,n,t.poolTokens,v]);return[T,(0,u.useCallback)((function(e){N((function(n){var a={};if("tokenInputs"===e.fieldName){var o=e.tokenSymbol,s=void 0===o?"":o,i=e.value,l=I(I({},n.tokenInputs),{},(0,r.Z)({},s,v[s](i))),c=t.poolTokens.filter((function(e){return 0!==+l[e[b].symbol].valueRaw}));a={withdrawType:0===c.length?S:1===c.length?c[0][b].symbol:O,lpTokenAmountToSpend:h.O$.from("0"),percentage:null,tokenInputs:l,error:null}}else"percentage"===e.fieldName?a=isNaN(+e.value)||+e.value<0||+e.value>100?{percentage:e.value,lpTokenAmountToSpend:h.O$.from("0"),error:{field:"percentage",message:"Invalid input"},tokenInputs:k}:{withdrawType:n.withdrawType===O?S:n.withdrawType,percentage:e.value,error:null}:"withdrawType"===e.fieldName?a={tokenInputs:k,percentage:n.percentage||"100",withdrawType:e.value,error:null}:"reset"===e.fieldName&&(a=y);var u=I(I({},n),a),d="tokenInputs"===e.fieldName&&t.poolTokens.every((function(e){var t=u.tokenInputs[e[b].symbol].valueRaw;return isNaN(+t)||0===+t}));return u.error||d||P(u),u}))}),[t.poolTokens,P,v,k,y])]}(f.d_),V=(0,o.Z)(W,2),$=V[0],q=V[1],H=(0,A.T)(),F=(0,x.sg)(f.d_),Y=(0,_.h7)(),Q=(0,k.b)(),G=Q.slippageCustom,X=Q.slippageSelected,J=Q.gasPriceSelected,ee=Q.gasCustom,te=Q.transactionDeadlineCustom,ne=Q.transactionDeadlineSelected,re=Q.infiniteApproval,ae=(0,x.tZ)(f.d_),oe=f.YM[f.d_].poolTokens.map((function(e){return e[t]})),se=(0,u.useState)({}),ie=se[0],le=se[1],ce=(0,v.Z)(n,oe),ue=function(e){var t=f.YM[e],n=(0,x.tZ)(e),r=(0,m.Ui)(e),s=(0,o.Z)(r,2)[1],l=(0,x.aQ)(),d=l.account,p=l.chainId,h=(0,u.useState)([]),b=h[0],g=h[1],v=t.poolTokens.map((function(e){return e[p]})),k=(0,u.useCallback)((0,a.Z)(i().mark((function e(){var t,r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(p===c.a_.RUBY_SKALE_TESTNET){e.next=3;break}return g([]),e.abrupt("return");case 3:return e.next=5,n.calculateRemoveLiquidity(s.lpTokenBalance);case 5:t=e.sent,r=v.map((function(e,n){return{token:e,balance:t[n]}})),g(r);case 8:case"end":return e.stop()}}),e)}))),[s,d,p]);return(0,u.useEffect)((function(){d&&s&&p&&k()}),[s,d,p]),b}(f.d_),de=(0,m.m$)(),pe=de.tokenPricesUSD,me=de.gasPrices,fe=(0,u.useState)(x.UK.UNKNOWN),xe=fe[0],he=fe[1],be=(0,u.useState)(!1),ge=be[0],ve=be[1],ke=(0,u.useState)({showConfirm:!1,attemptingTxn:!1,txHash:"",errorMessage:null,pendingText:void 0}),ye=ke[0],we=ye.showConfirm,Te=ye.attemptingTxn,je=ye.txHash,Ne=ye.errorMessage,Ie=ye.pendingText,Oe=ke[1],Se=h.O$.from((0,c.f5)({gasStandard:me.gasStandard,gasFast:me.gasFast,gasInstant:me.gasInstant},J,ee)),Pe=u.useMemo((function(){return s.poolTokens.map((function(e){var n=e[t];return{poolToken:n,inputValue:$.tokenInputs[n.symbol].valueRaw}}))}),[$,s.poolTokens]),Ce=(0,T.BS)("removeLiquidityImbalance").mul(Se),Ae={amount:Ce,valueUSD:null!==pe&&void 0!==pe&&pe.ETH?g.parseUnits(pe.ETH.toFixed(2),18).mul(Ce).div(h.O$.from(10).pow(25)):null},_e=(0,u.useState)(b._Y),Ee=_e[0],Ue=_e[1];function De(){return(De=(0,a.Z)(i().mark((function e(){var t,r,a,o,c;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=$.withdrawType,$.tokenInputs,a=$.lpTokenAmountToSpend,n){e.next=4;break}return Oe((function(e){return B(B({},e),{},{errorMessage:"Wallet must be connected"})})),e.abrupt("return");case 4:if(ae){e.next=7;break}return Oe((function(e){return B(B({},e),{},{errorMessage:"Swap contract is not loaded"})})),e.abrupt("return");case 7:if(!a.isZero()){e.next=9;break}return e.abrupt("return");case 9:if(null!=F){e.next=11;break}return e.abrupt("return");case 11:return o=J===U.NH.Custom&&null!==ee&&void 0!==ee&&ee.valueSafe?ee.valueSafe:J===U.NH.Standard?me.gasStandard:J===U.NH.Instant?me.gasInstant:me.gasFast,o=g.parseUnits((null===(t=o)||void 0===t?void 0:t.toString())||"45","gwei"),he((function(){return x.UK.PENDING})),c="IMBALANCE"===r?(0,T.kx)(a,X,G):a,Oe((function(e){return B(B({},e),{},{attemptingTxn:!0,showConfirm:!0,pendingText:(0,P.jsx)(l.bb,{children:"Approving"})})})),e.next=18,(0,E.S_)(F,ae.address,n,c,re,o,{onTransactionStart:function(e){return function(){if(e){var t=ae.address;Y(e,{summary:"Approved ".concat(s.lpTokenSymbol," to ").concat(f.d_),approval:{tokenAddress:F.address,spender:t}})}}},onTransactionSuccess:function(e){return function(){console.log("checkAndApproveTokenForTrade onTransactionSuccess",e),he((function(){return x.UK.APPROVED})),ve(!0),Oe((function(e){return B(B({},e),{},{showConfirm:!1,attemptingTxn:!1})}))}},onTransactionError:function(e){he((function(){return x.UK.NOT_APPROVED})),Oe((function(e){return B(B({},e),{},{attemptingTxn:!1})})),4001===(null===e||void 0===e?void 0:e.code)?Oe((function(e){return B(B({},e),{},{errorMessage:"Transaction rejected."})})):Oe((function(t){return B(B({},t),{},{errorMessage:"Your transaction could not be completed ".concat(e)})}))}});case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ze(){return Me.apply(this,arguments)}function Me(){return(Me=(0,a.Z)(i().mark((function e(){var n,a,o,l,u,d,p,m,b;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n=$.withdrawType,a=$.tokenInputs,o=$.lpTokenAmountToSpend,console.debug("lpTokenAmountToSpend: ".concat(g.formatUnits(o,18))),l=Math.round((new Date).getTime()/1e3+60*(0,c.wu)(ne,te)),Oe((function(e){return B(B({},e),{},{attemptingTxn:!0,showConfirm:!0,errorMessage:null,pendingText:"Withdrawing tokens from ".concat(f.d_,"...")})})),"ALL"!==n){e.next=16;break}return e.next=8,ae.removeLiquidity(o,s.poolTokens.map((function(e){return(0,T.wh)(h.O$.from(a[e[t].symbol].valueSafe),X,G)})),l);case 8:return u=e.sent,d=s.poolTokens.map((function(e){return e[t].symbol})),p=d.join(", "),Y(u,{summary:"Withdrawn ".concat(p," from ").concat(f.d_)}),e.next=14,u.wait();case 14:e.next=33;break;case 16:if("IMBALANCE"!==n){e.next=27;break}return e.next=19,ae.removeLiquidityImbalance(s.poolTokens.map((function(e){return a[e[t].symbol].valueSafe})),(0,T.kx)(o,X,G),l);case 19:return u=e.sent,m=s.poolTokens.map((function(e){return e[t].symbol})),b=m.join(", "),Y(u,{summary:"Withdrawn ".concat(b," from ").concat(f.d_)}),e.next=25,u.wait();case 25:e.next=33;break;case 27:return e.next=29,ae.removeLiquidityOneToken(o,s.poolTokens.findIndex((function(e){return e[t].symbol===n})),(0,T.wh)(h.O$.from(a[n||""].valueSafe),X,G),l);case 29:return u=e.sent,Y(u,{summary:"Withdrawn ".concat(n," from ").concat(f.d_)}),e.next=33,u.wait();case 33:H((0,D.k2)({transactionTimes:(0,r.Z)({},f.L0.WITHDRAW,Date.now())})),q({fieldName:"reset",value:"reset"}),Oe((function(e){return B(B({},e),{},{showConfirm:!1,attemptingTxn:!1,errorMessage:null})})),he(x.UK.UNKNOWN),ve(!1),e.next=43;break;case 40:e.prev=40,e.t0=e.catch(0),4001===(null===e.t0||void 0===e.t0?void 0:e.t0.code)?Oe((function(e){return B(B({},e),{},{attemptingTxn:!1,errorMessage:"Transaction rejected."})})):Oe((function(t){return B(B({},t),{},{attemptingTxn:!1,errorMessage:"Withdraw failed: ".concat(e.t0)})}));case 43:case"end":return e.stop()}}),e,null,[[0,40]])})))).apply(this,arguments)}function Re(e,t){q({fieldName:"tokenInputs",value:t,tokenSymbol:e})}function Le(e){q({fieldName:"withdrawType",value:e})}(0,u.useEffect)((function(){var e={};oe.map((function(t){var n=$.tokenInputs[t.symbol].valueRaw,r=(0,y.e)(n,t);e[t.symbol]=r})),le(e)}),[$]),(0,u.useEffect)((function(){function e(){return(e=(0,a.Z)(i().mark((function e(){var r,a,o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=ae&&null!=z&&null!=K&&null!=n){e.next=3;break}return he(x.UK.UNKNOWN),e.abrupt("return");case 3:return r=g.parseUnits(s.poolTokens.reduce((function(e,n){return e+(+$.tokenInputs[n[t].symbol].valueRaw||0)}),0).toString(),18),e.next=6,F.allowance(n,s.addresses[t]);case 6:if(a=e.sent,!K.totalLocked.gt(0)||!r.gt(0)){e.next=13;break}return e.next=10,ae.calculateTokenAmount(s.poolTokens.map((function(e){return $.tokenInputs[e[t].symbol].valueSafe})),!1);case 10:o=e.sent,e.next=14;break;case 13:o=r;case 14:a.gte(o)?he(x.UK.APPROVED):he(x.UK.NOT_APPROVED),Ue((0,T.sS)(o,r,K.virtualPrice,!0));case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[K,$,ae,z,n,s.poolTokens]);for(var Be={},Ke=0;Ke<ue.length;Ke++){var ze=ue[Ke].token,We=ue[Ke].balance;if(ze&&We){var Ve=We.toString(),$e=c.ih.fromRawAmount(ze,Ve);Be[ze.symbol]=(0,p.iN)($e)}}var qe=(0,u.useCallback)((function(e){Be[e]&&Re(e,Be[e].toExact())}),[Be,$]),He=(0,u.useCallback)((function(e){Be[e]&&Re(e,Be[e].divide(2).toExact())}),[Be,$]),Fe=(0,u.useCallback)((function(e){Be[e]&&Re(e,Be[e].divide(4).toExact())}),[Be,$]),Ye=(0,u.useCallback)((function(){je&&q({fieldName:"reset",value:"reset"}),Oe((function(e){return B(B({},e),{},{showConfirm:!1,txHash:""})}))}),[je]),Qe={withdraw:[],rates:[],slippage:(0,T.it)(X,G),priceImpact:Ee,txnGasCost:Ae};s.poolTokens.forEach((function(e){var n,r=e[t];h.O$.from($.tokenInputs[r.symbol].valueSafe).gt(0)&&(Qe.withdraw.push({poolToken:r,value:(0,c.Fn)(g.formatUnits($.tokenInputs[r.symbol].valueSafe,r.decimals))}),null!=pe&&Qe.rates.push({poolToken:r,value:g.formatUnits($.tokenInputs[r.symbol].valueSafe,r.decimals),rate:(0,c.Fn)(null===(n=pe[r.symbol])||void 0===n?void 0:n.toFixed(2))}))}));var Ge=!z||z.lpTokenBalance.eq(b._Y),Xe=(0,u.useState)(!0),Je=(Xe[0],Xe[1],(0,u.useCallback)((function(){return Ne?(0,P.jsx)(w.ht,{onDismiss:Ye,message:Ne}):(0,P.jsx)(C,{onClose:Ye,onConfirm:Ze,currency:oe[0],transactionData:Qe})}),[Ne,Qe])),et=xe===x.UK.NOT_APPROVED||xe===x.UK.PENDING||ge&&xe===x.UK.APPROVED,tt=(0,R.Z)().width>320;return(0,P.jsxs)(l.W2,{id:"pool-page",className:"lg:py-61px md:py-12 py-8 space-y-6 xl:px-0 px-5",maxWidth:"6xl",children:[(0,P.jsxs)(d.default,{children:[(0,P.jsx)("title",{children:"Stable Pool Withdraw | RubyExchange"}),(0,P.jsx)("meta",{name:"description",content:"RubyExchange liquidity pools are markets for trades between the two tokens, you can provide these tokens and become a liquidity provider to earn 0.25% of fees from trades."},"description")]}),(0,P.jsx)(w.ZP,{isOpen:we,onDismiss:Ye,attemptingTxn:Te,content:Je,pendingText:Ie}),(0,P.jsxs)("div",{className:"grid lg:grid-cols-3 gap-x-6",children:[(0,P.jsx)("div",{className:"lg:col-span-2 col-span",children:(0,P.jsxs)("div",{className:"border border-blue-violet p-6 rounded-box",children:[(0,P.jsxs)("div",{className:"flex justify-between",children:[(0,P.jsx)("p",{className:"sm:text-base text-sm font-semibold text-light dark:text-port-gore",children:"Remove Liquidity"}),(0,P.jsx)(M.default,{href:"/stablePool/deposit",children:(0,P.jsx)("p",{className:"sm:text-base text-sm font-semibold text-blue-violet hover:text-light dark:hover:text-port-gore cursor-pointer",children:"Add Liquidity"})})]}),(0,P.jsx)(l.rL,{value:"0.0"===$.tokenInputs[oe[0].symbol].valueRaw?void 0:$.tokenInputs[oe[0].symbol].valueRaw,showMaxButton:!0,currency:oe[0],onUserInput:Re,onMax:qe,onHalf:He,onQuarter:Fe,fiatValue:ie&&ie[oe[0].symbol]&&ie[oe[0].symbol],selectedCurrencyBalance:ce[oe[0].address]}),(0,P.jsx)(l.rL,{value:"0.0"===$.tokenInputs[oe[1].symbol].valueRaw?void 0:$.tokenInputs[oe[1].symbol].valueRaw,showMaxButton:!0,currency:oe[1],onUserInput:Re,onMax:qe,onHalf:He,onQuarter:Fe,fiatValue:ie&&ie[oe[1].symbol]&&ie[oe[1].symbol],selectedCurrencyBalance:ce[oe[1].address]}),(0,P.jsx)(l.rL,{value:"0.0"===$.tokenInputs[oe[2].symbol].valueRaw?void 0:$.tokenInputs[oe[2].symbol].valueRaw,showMaxButton:!0,currency:oe[2],onUserInput:Re,onMax:qe,onHalf:He,onQuarter:Fe,fiatValue:ie&&ie[oe[2].symbol]&&ie[oe[2].symbol],selectedCurrencyBalance:ce[oe[2].address]}),(0,P.jsx)(l.rL,{value:"0.0"===$.tokenInputs[oe[3].symbol].valueRaw?void 0:$.tokenInputs[oe[3].symbol].valueRaw,showMaxButton:!0,currency:oe[3],onUserInput:Re,onMax:qe,onHalf:He,onQuarter:Fe,fiatValue:ie&&ie[oe[3].symbol]&&ie[oe[3].symbol],selectedCurrencyBalance:ce[oe[3].address]}),(0,P.jsxs)("div",{className:"mt-4 rounded bg-port-gore dark:bg-light p-4",children:[(0,P.jsxs)("p",{className:"font-semibold sm:text-sm text-xs text-blue-violet flex justify-between items-center mb-2.5",children:[Qe.priceImpact.gte(0)?"Bonus":"Slippage",":"," ",(0,P.jsx)("span",{className:"text-light dark:text-port-gore",children:(0,c.X3)(Qe.priceImpact,18,4)})]}),(0,P.jsx)(l.Fq,{})]}),tt&&(0,P.jsxs)("div",{children:[(0,P.jsx)("p",{className:"sm:text-lg text-base text-light dark:text-port-gore font-semibold mt-4",children:"Balanced Withdrawal"}),(0,P.jsxs)("div",{className:"flex sm:flex-row flex-col justify-between sm:items-center sm:mt-0 mt-2.5",children:[(0,P.jsx)("p",{className:"text-light dark:text-port-gore sm:text-base text-sm font-semibold",children:"Percentage (%): "}),(0,P.jsxs)("div",{className:"sm:mt-0 mt-2.5",children:[(0,P.jsxs)("div",{className:"flex items-center rounded-input border border-blue-violet bg-port-gore dark:bg-white px-2 py-1.5 w-full",children:[(0,P.jsx)("input",{placeholder:"0.0",onChange:function(e){var t;t=e.currentTarget.value,q({fieldName:"percentage",value:t}),ve(!1)},onFocus:function(e){return e.target.select()},value:$.percentage?$.percentage:"",className:"sm:text-base text-sm text-light dark:text-port-gore bg-port-gore dark:bg-white placeholder-blue-violet focus:placeholder-alabaster dark:focus:placeholder-port-gore"}),(0,P.jsx)("div",{className:"ml-auto",children:(0,P.jsx)(l.zx,{size:"xs",variant:"violetOutline",className:"sm:text-sm text-xs font-semibold border rounded-5px px-2 py-[3px] capitalize dark:bg-white dark:text-port-gore",onClick:function(){q({fieldName:"percentage",value:"100"})},children:"Max"})})]}),$.error&&(0,P.jsx)("div",{className:"error mt-1 text-amaranth sm:text-base text-sm",children:$.error.message})]})]}),(0,P.jsxs)("div",{className:"flex sm:flex-row flex-col mt-2.5 sm:gap-y-0 gap-y-2.5 gap-x-5",children:[(0,P.jsx)(l.EU,{checked:"ALL"===$.withdrawType,onChange:function(){return Le("ALL")},label:"Combo"}),Pe.map((function(e){return(0,P.jsx)(l.EU,{checked:$.withdrawType===e.poolToken.symbol,onChange:function(){return Le(e.poolToken.symbol)},label:e.poolToken.symbol,disabled:null===K||void 0===K?void 0:K.isPaused},e.poolToken.symbol)}))]})]}),(0,P.jsxs)("div",{className:"mt-4",children:[n?et?(0,P.jsxs)(l.m0,{className:"mt-0",children:[xe!==x.UK.APPROVED&&(0,P.jsx)(l.gn,{onClick:function(){return De.apply(this,arguments)},disabled:xe!==x.UK.NOT_APPROVED,className:"my-6",variant:"orange",children:xe===x.UK.PENDING?(0,P.jsx)(l.BA,{gap:"6px",justify:"center",children:(0,P.jsxs)("div",{className:"flex items-center",children:["Approving ",(0,P.jsx)(l.aN,{stroke:"white",className:"my-auto ml-2.5"})]})}):"Approve"}),xe===x.UK.APPROVED&&(0,P.jsx)(l.zx,{onClick:function(){Oe((function(e){return B(B({},e),{},{showConfirm:!0,errorMessage:void 0,attemptingTxn:!1})}))},style:{width:"100%"},id:"swap-button",disabled:xe!==x.UK.APPROVED||Ge||!!$.error||$.lpTokenAmountToSpend.isZero()||(null===K||void 0===K?void 0:K.isPaused),className:"my-6",variant:"orange",children:"Withdraw"})]}):(0,P.jsx)(l.zx,{onClick:function(){Oe((function(e){return B(B({},e),{},{showConfirm:!0,errorMessage:void 0,attemptingTxn:!1})}))},id:"swap-button",disabled:xe!==x.UK.APPROVED||Ge||!!$.error||$.lpTokenAmountToSpend.isZero()||(null===K||void 0===K?void 0:K.isPaused),className:"my-6",variant:"orange",children:"Withdraw"}):(0,P.jsx)(l.ck,{className:"sm:text-base text-sm text-black-russian dark:text-white",variant:"gradient"}),et&&(0,P.jsx)(l.sg,{style:{marginTop:"1rem"},children:(0,P.jsx)(l.tI,{steps:[xe===x.UK.APPROVED]})}),Ne?(0,P.jsx)(Z.rn,{error:Ne}):null]})]})}),(0,P.jsxs)("div",{className:"flex flex-col gap-y-6 lg:mt-0 mt-6",children:[z&&(0,P.jsx)(l.Iw,{userShareData:z,poolTokens:oe}),(0,P.jsx)(l.s6,{poolName:f.d_,poolData:K}),(0,P.jsx)(l.dn,{poolName:f.d_,poolData:K,poolTokens:oe})]})]})]})}K.Guard=(0,l.hJ)([c.a_.EUROPA]);var z=K},75719:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/stablePool/withdraw",function(){return n(93015)}])}},function(e){e.O(0,[3662,2894,3528,9774,2888,179],(function(){return t=75719,e(e.s=t);var t}));var t=e.O();_N_E=t}]);