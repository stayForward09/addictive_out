(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9793],{46329:function(e,n,t){"use strict";t.r(n);var i=t(83789),o=t(30266),r=t(92809),a=t(80318),s=t(809),l=t.n(s),d=t(74891),c=t(99952),u=t(26367),p=t(586),v=t(96540),N=t(67294),g=t(69896),C=t(29708),x=t(73832),R=t(85243),f=t(20181),m=t(2593),h=t(72252),y=t(3045),b=t(9008),A=t(98802),E=t(6221),U=t(22622),_=t(61945),j=t(28269),Y=t(66269),w=t(49539),B=t(11163),k=t(30463),P=t(99123),O=t(97096),D=t(54663),S=t(72319),T=t(85893);function q(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function I(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?q(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):q(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var Z=new u.gG(50,1e4);function L(){var e,n,t,s,q,L,F,K,M,G,V,z,H,W,X=(0,j.a)(),J=X.account,Q=X.chainId,$=X.library,ee=(0,B.useRouter)(),ne=ee.query.tokens||[void 0,"0x73d22d8a2D1f59Bf5Bcf62cA382481a2073FAF58"],te=(0,a.Z)(ne,2),ie=te[0],oe=te[1],re=(0,Y.U8)(ie),ae=(0,Y.U8)("0x73d22d8a2D1f59Bf5Bcf62cA382481a2073FAF58"),se=Boolean(Q&&(re&&(0,u.KA)(re,v.DX[Q])||ae&&(0,u.KA)(ae,v.DX[Q]))),le=((0,D.mq)(),(0,f.DG)()),de=(0,a.Z)(le,1)[0],ce=(0,R.OY)(),ue=ce.independentField,pe=ce.typedValue,ve=ce.otherTypedValue,Ne=(0,R.Qw)(null!==re&&void 0!==re?re:void 0,null!==ae&&void 0!==ae?ae:void 0),ge=Ne.dependentField,Ce=Ne.currencies,xe=Ne.pair,Re=Ne.pairState,fe=Ne.currencyBalances,me=Ne.parsedAmounts,he=Ne.price,ye=Ne.noLiquidity,be=Ne.liquidityMinted,Ae=Ne.poolTokenPercentage,Ee=Ne.error,Ue=(0,R.OA)(ye),_e=Ue.onFieldAInput,je=Ue.onFieldBInput,Ye=!Ee,we=(0,N.useState)(!1),Be=we[0],ke=we[1],Pe=(0,N.useState)(!1),Oe=Pe[0],De=Pe[1],Se=(0,N.useState)(null),Te=Se[0],qe=Se[1],Ie=(0,O.Z)(),Ze=(0,f.eq)(Z),Le=(0,N.useState)(""),Fe=Le[0],Ke=Le[1],Me=(t={},(0,r.Z)(t,ue,pe),(0,r.Z)(t,ge,ye?ve:null!==(e=null===(n=me[ge])||void 0===n?void 0:n.toSignificant(6))&&void 0!==e?e:""),t);(0,N.useEffect)((function(){ye&&ee.push("/create/".concat(ie,"/").concat(oe))}),[ye]);var Ge=[y.gN.CURRENCY_A,y.gN.CURRENCY_B].reduce((function(e,n){return I(I({},e),{},(0,r.Z)({},n,(0,x.iN)(fe[n])))}),{}),Ve=[y.gN.CURRENCY_A,y.gN.CURRENCY_B].reduce((function(e,n){var t,i;return I(I({},e),{},(0,r.Z)({},n,null===(t=Ge[n])||void 0===t?void 0:t.equalTo(null!==(i=me[n])&&void 0!==i?i:"0")))}),{}),ze=(0,k.Ti)(),He=(0,c.qL)(me[y.gN.CURRENCY_A],null===ze||void 0===ze?void 0:ze.address),We=(0,a.Z)(He,2),Xe=We[0],Je=We[1],Qe=(0,c.qL)(me[y.gN.CURRENCY_B],null===ze||void 0===ze?void 0:ze.address),$e=(0,a.Z)(Qe,2),en=$e[0],nn=$e[1],tn=(0,P.h7)();function on(){return rn.apply(this,arguments)}function rn(){return(rn=(0,o.Z)(l().mark((function e(){var n,t,a,s,d,c,u,v,N,g,x,R,f,h,b,A;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Q&&$&&J&&ze){e.next=2;break}return e.abrupt("return");case 2:if(t=me[y.gN.CURRENCY_A],a=me[y.gN.CURRENCY_B],t&&a&&re&&ae&&Ie){e.next=5;break}return e.abrupt("return");case 5:return n={},(0,r.Z)(n,y.gN.CURRENCY_A,(0,C.uc)(t,ye?p.fI:Ze)[0]),(0,r.Z)(n,y.gN.CURRENCY_B,(0,C.uc)(a,ye?p.fI:Ze)[0]),s=n,re.isNative||ae.isNative?(R=ae.isNative,d=ze.estimateGas.addLiquidityETH,c=ze.addLiquidityETH,u=[null!==(N=null===(g=R?re:ae)||void 0===g||null===(x=g.wrapped)||void 0===x?void 0:x.address)&&void 0!==N?N:"",(R?t:a).quotient.toString(),s[R?y.gN.CURRENCY_A:y.gN.CURRENCY_B].toString(),s[R?y.gN.CURRENCY_B:y.gN.CURRENCY_A].toString(),J,Ie.toHexString()],v=m.O$.from((R?a:t).quotient.toString())):(d=ze.estimateGas.addLiquidity,c=ze.addLiquidity,u=[null!==(f=null===re||void 0===re||null===(h=re.wrapped)||void 0===h?void 0:h.address)&&void 0!==f?f:"",null!==(b=null===ae||void 0===ae||null===(A=ae.wrapped)||void 0===A?void 0:A.address)&&void 0!==b?b:"",t.quotient.toString(),a.quotient.toString(),s[y.gN.CURRENCY_A].toString(),s[y.gN.CURRENCY_B].toString(),J,Ie.toHexString()],v=null),De(!0),e.next=10,d.apply(void 0,(0,i.Z)(u).concat([v?{value:v}:{}])).then(function(){var e=(0,o.Z)(l().mark((function e(n){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=I(I({},v?{value:v}:{}),{},{gasLimit:(0,C.yC)(n)}),e.next=3,c.apply(void 0,(0,i.Z)(u).concat([t]));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()).then(function(){var e=(0,o.Z)(l().mark((function e(n){var t,i,o,r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return tn(n,{summary:"Add ".concat(null===(t=me[y.gN.CURRENCY_A])||void 0===t?void 0:t.toSignificant(3)," ").concat(null===(i=Ce[y.gN.CURRENCY_A])||void 0===i?void 0:i.symbol," and ").concat(null===(o=me[y.gN.CURRENCY_B])||void 0===o?void 0:o.toSignificant(3)," ").concat(null===(r=Ce[y.gN.CURRENCY_B])||void 0===r?void 0:r.symbol)}),e.next=3,n.wait();case 3:ke(!1),De(!1),Ke(n.hash);case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()).catch((function(e){De(!1),4001===(null===e||void 0===e?void 0:e.code)?qe("Transaction rejected."):qe("Add Liquidity failed: ".concat(e))}));case 10:_e(""),je("");case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var an=function(){var e,n,t,i;return ye?(0,T.jsx)("div",{className:"pb-4",children:(0,T.jsxs)("div",{className:"flex items-center justify-start gap-3",children:[(0,T.jsx)("div",{className:"sm:text-2xl text-lg font-bold text-alabaster dark:text-port-gore",children:(null===(e=Ce[y.gN.CURRENCY_A])||void 0===e?void 0:e.symbol)+"/"+(null===(n=Ce[y.gN.CURRENCY_B])||void 0===n?void 0:n.symbol)}),(0,T.jsx)("div",{className:"sm:visible invisible",children:(0,T.jsx)(d.ge,{currency0:re,currency1:ae,size:48})})]})}):(0,T.jsxs)("div",{className:"pb-4",children:[(0,T.jsxs)("div",{className:"flex items-center justify-start gap-3",children:[(0,T.jsx)("div",{className:"sm:text-2xl text-xl font-bold text-alabaster dark:text-port-gore",children:null===be||void 0===be?void 0:be.toSignificant(6)}),(0,T.jsx)("div",{className:"grid grid-flow-col gap-2 sm:visible invisible",children:(0,T.jsx)(d.ge,{currency0:re,currency1:ae,size:48})})]}),(0,T.jsxs)("div",{className:"sm:text-xl text-lg font-medium text-alabaster dark:text-port-gore",children:[null===(t=Ce[y.gN.CURRENCY_A])||void 0===t?void 0:t.symbol,"/",null===(i=Ce[y.gN.CURRENCY_B])||void 0===i?void 0:i.symbol,"\xa0Pool Tokens"]}),(0,T.jsx)("div",{className:"pt-3 text-xs italic text-alabaster dark:text-port-gore",children:"Output is estimated. If the price changes by more than ".concat(Ze.toSignificant(4),"% your transaction\n            will revert.")})]})},sn=function(){return(0,T.jsx)(h.E,{price:he,currencies:Ce,parsedAmounts:me,noLiquidity:ye,onAdd:on,poolTokenPercentage:Ae})},ln="Supplying ".concat(null===(s=me[y.gN.CURRENCY_A])||void 0===s?void 0:s.toSignificant(6)," ").concat(null===(q=Ce[y.gN.CURRENCY_A])||void 0===q?void 0:q.symbol," and ").concat(null===(L=me[y.gN.CURRENCY_B])||void 0===L?void 0:L.toSignificant(6)," ").concat(null===(F=Ce[y.gN.CURRENCY_B])||void 0===F?void 0:F.symbol),dn=(0,N.useCallback)((function(e){var n=(0,x.Hh)(e);n===oe?ee.push("/add/".concat(oe,"/").concat(ie)):ee.push("/add/".concat(n,"/","0x73d22d8a2D1f59Bf5Bcf62cA382481a2073FAF58"))}),[oe,ee,ie]),cn=(0,N.useCallback)((function(){ke(!1),Fe&&_e(""),Ke("")}),[_e,Fe]),un=(0,w.G)(null===Ce||void 0===Ce?void 0:Ce.CURRENCY_A,null===Ce||void 0===Ce?void 0:Ce.CURRENCY_B),pn=Ce.CURRENCY_A&&""!==(null===Ce||void 0===Ce?void 0:Ce.CURRENCY_A.symbol)?"Input token A (".concat(null===Ce||void 0===Ce?void 0:Ce.CURRENCY_A.symbol,")"):"Input token A",vn=(0,S._h)(null!==J&&void 0!==J?J:void 0,null!==(K=Ce[y.gN.CURRENCY_A])&&void 0!==K?K:void 0),Nn=(0,S._h)(null!==J&&void 0!==J?J:void 0,null!==(M=Ce[y.gN.CURRENCY_B])&&void 0!==M?M:void 0),gn=(0,N.useCallback)((function(){return Te?(0,T.jsx)(g.ht,{onDismiss:cn,message:Te}):(0,T.jsx)(g.pM,{title:ye?"You are creating a pool":"You will receive",onDismiss:cn,topContent:an,bottomContent:sn})}),[sn,an,Te]),Cn=(0,N.useState)({showApproveConfirm:!1,attemptingApproveTxn:!1,errorApproveMessage:void 0,pendingApproveText:void 0}),xn=Cn[0],Rn=xn.showApproveConfirm,fn=xn.errorApproveMessage,mn=xn.attemptingApproveTxn,hn=xn.pendingApproveText,yn=Cn[1],bn=(0,N.useCallback)((function(e){var n;n="a"===e?Je:nn,yn((function(n){var t,i;return I(I({},n),{},{showApproveConfirm:!0,attemptingApproveTxn:!0,errorApproveMessage:void 0,pendingApproveText:(0,T.jsxs)(T.Fragment,{children:["Approving ".concat("a"===e?null===(t=Ce[y.gN.CURRENCY_A])||void 0===t?void 0:t.symbol:null===(i=Ce[y.gN.CURRENCY_B])||void 0===i?void 0:i.symbol),(0,T.jsx)(d.bb,{})]})})})),n().then((function(){yn((function(e){return I(I({},e),{},{attemptingApproveTxn:!1,showApproveConfirm:!1,errorApproveMessage:void 0})}))})).catch((function(e){yn((function(e){return I(I({},e),{},{attemptingApproveTxn:!1})})),4001===(null===e||void 0===e?void 0:e.code)?yn((function(e){return I(I({},e),{},{errorApproveMessage:"Transaction rejected."})})):yn((function(e){return I(I({},e),{},{errorApproveMessage:"Approve failed: Please try again"})}))}))}),[Je,nn]),An=(0,N.useCallback)((function(){yn((function(e){return I(I({},e),{},{showApproveConfirm:!1})}))}),[]),En=(0,N.useCallback)((function(){return fn?(0,T.jsx)(g.ht,{onDismiss:An,message:fn}):(0,T.jsx)(g.pM,{title:"Confirm",onDismiss:An,topContent:function(){return""},bottomContent:function(){return""}})}),[An,fn]);return(0,T.jsxs)(T.Fragment,{children:[(0,T.jsxs)(b.default,{children:[(0,T.jsx)("title",{children:"Add Liquidity | Ruby.Exchange"}),(0,T.jsx)("meta",{name:"description",content:"Add liquidity to the SushiSwap AMM to enable gas optimised and low slippage trades across countless networks"},"description")]}),(0,T.jsxs)(d.W2,{id:"add-liquidity-page",className:"py-4 space-y-6 md:py-8 lg:py-12 lg:p-0 px-5",maxWidth:"2xl",children:[(0,T.jsx)("div",{className:"flex items-center justify-between mb-5",children:(0,T.jsx)(d.OL,{href:"/pool",children:(0,T.jsxs)("a",{className:"flex items-center space-x-2 text-base font-medium text-center cursor-pointer text-secondary hover:text-alabaster dark:hover:text-port-gore",children:[(0,T.jsx)("span",{children:"View Liquidity Positions"}),(0,T.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,T.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5l7 7-7 7"})})]})})}),(0,T.jsx)(d.bZ,{message:(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)("b",{children:"Tip:"})," ","By adding liquidity you'll earn 0.25% of all trades on this pair\n                proportional to your share of the pool. Fees are added to the pool, accrue in real time and can be\n                claimed by withdrawing your liquidity."]}),type:"information"}),(0,T.jsxs)("div",{className:"space-y-4 rounded",style:{zIndex:1},children:[(0,T.jsx)(d.a3,{input:Ce[y.gN.CURRENCY_A],output:Ce[y.gN.CURRENCY_B],allowedSlippage:Ze,swapTitle:"Add Liquidity"}),(0,T.jsx)(g.ZP,{isOpen:Rn,onDismiss:An,attemptingTxn:mn,content:En,pendingText:hn}),(0,T.jsx)(g.ZP,{isOpen:Be,onDismiss:cn,attemptingTxn:Oe,content:gn,pendingText:ln}),(0,T.jsxs)("div",{className:"flex flex-col space-y-4",children:[xe&&Re!==U._G.INVALID&&(0,T.jsx)(A.Z,{input:Ce[y.gN.CURRENCY_A],output:Ce[y.gN.CURRENCY_B]}),(0,T.jsxs)("div",{children:[(0,T.jsx)(d.tP,{value:Me[y.gN.CURRENCY_A],onUserInput:_e,onMax:function(){var e,n;_e(null!==(e=null===(n=Ge[y.gN.CURRENCY_A])||void 0===n?void 0:n.toExact())&&void 0!==e?e:"")},onCurrencySelect:dn,showMaxButton:!Ve[y.gN.CURRENCY_A],currency:Ce[y.gN.CURRENCY_A],id:"add-liquidity-input-tokena",label:pn,selectedCurrencyBalance:vn,tokensForInputA:!0}),(0,T.jsx)(d.Tz,{justify:"space-between",className:"py-2.5"}),(0,T.jsx)(d.tP,{value:Me[y.gN.CURRENCY_B],onUserInput:je,onMax:function(){var e,n;je(null!==(e=null===(n=Ge[y.gN.CURRENCY_B])||void 0===n?void 0:n.toExact())&&void 0!==e?e:"")},showMaxButton:!Ve[y.gN.CURRENCY_B],currency:Ce[y.gN.CURRENCY_B],id:"add-liquidity-input-tokenb",label:"Input token B",selectedCurrencyBalance:Nn})]}),Ce[y.gN.CURRENCY_A]&&Ce[y.gN.CURRENCY_B]&&Re!==U._G.INVALID&&(0,T.jsx)("div",{className:"p-1 rounded border border-blue-violet",children:(0,T.jsx)(E.Z,{currencies:Ce,price:he,noLiquidity:ye,poolTokenPercentage:Ae,className:""})}),un?(0,T.jsx)(d.zx,{color:"gradient",size:"lg",disabled:!0,children:"Unsupported Asset"}):J?(Xe===c.UK.NOT_APPROVED||Xe===c.UK.PENDING||en===c.UK.NOT_APPROVED||en===c.UK.PENDING||Ye)&&(0,T.jsxs)(T.Fragment,{children:[(0,T.jsxs)("div",{className:"flex justify-between gap-x-8",children:[Xe!==c.UK.APPROVED&&(0,T.jsx)(d.zx,{variant:"orange",onClick:function(){return bn("a")},disabled:Xe===c.UK.PENDING,children:Xe===c.UK.PENDING?(0,T.jsx)(d.bb,{children:"Approving ".concat(null===(G=Ce[y.gN.CURRENCY_A])||void 0===G?void 0:G.symbol)}):"Approve ".concat(null===(V=Ce[y.gN.CURRENCY_A])||void 0===V?void 0:V.symbol)}),en!==c.UK.APPROVED&&(0,T.jsx)(T.Fragment,{children:void 0!==(null===(z=Ce[y.gN.CURRENCY_B])||void 0===z?void 0:z.symbol)?(0,T.jsx)(d.zx,{variant:"orange",onClick:function(){return bn("b")},disabled:en===c.UK.PENDING,children:en===c.UK.PENDING?(0,T.jsx)(d.bb,{children:"Approving ".concat(null===(H=Ce[y.gN.CURRENCY_B])||void 0===H?void 0:H.symbol)}):"Approve ".concat(null===(W=Ce[y.gN.CURRENCY_B])||void 0===W?void 0:W.symbol)}):null})]}),Xe===c.UK.APPROVED&&en===c.UK.APPROVED&&(0,T.jsx)(d.Kd,{onClick:function(){de?on():ke(!0),qe(null)},disabled:!Ye||Xe!==c.UK.APPROVED||en!==c.UK.APPROVED,error:!Ye&&!!me[y.gN.CURRENCY_A]&&!!me[y.gN.CURRENCY_B],variant:"orange",children:null!==Ee&&void 0!==Ee?Ee:"Confirm Adding Liquidity"})]}):(0,T.jsx)(d.ck,{className:"w-full sm:text-base text-sm text-black-russian dark:text-alabaster",variant:"gradient"})]}),un?(0,T.jsx)(_.Z,{show:un,currencies:[Ce.CURRENCY_A,Ce.CURRENCY_B]}):xe&&!ye&&Re!==U._G.INVALID?(0,T.jsx)(d.WP,{showUnwrapped:se,pair:xe}):null]})]})]})}L.Guard=(0,d.hJ)([u.a_.EUROPA]),n.default=L},1672:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/exchange/add/[[...tokens]]",function(){return t(46329)}])}},function(e){e.O(0,[2173,9774,2888,179],(function(){return n=1672,e(e.s=n);var n}));var n=e.O();_N_E=n}]);