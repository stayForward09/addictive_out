(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8526],{8214:function(e,n,t){"use strict";t.r(n);var i=t(83789),o=t(92809),r=t(30266),a=t(80318),s=t(809),l=t.n(s),c=t(74891),d=t(99952),u=t(26367),p=t(586),v=t(96540),N=t(67294),C=t(69896),g=t(29708),R=t(73832),x=t(85243),m=t(20181),f=t(2593),h=t(72252),b=t(3045),y=t(9008),E=t(98802),A=t(6221),U=t(22622),_=t(61945),j=t(28269),Y=t(66269),w=t(49539),k=t(11163),P=t(30463),B=t(99123),O=t(97096),S=t(54663),D=t(72319),T=t(30879),q=t(73574),I=t(47786),Z=t(85893);function L(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function M(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?L(Object(t),!0).forEach((function(n){(0,o.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):L(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var K=new u.gG(50,1e4);function G(){var e,n,t,s,L,G,V,F,z,H,W,X,J,Q,$,ee,ne=(0,j.a)(),te=ne.account,ie=ne.chainId,oe=ne.library,re=(0,k.useRouter)(),ae=re.query.tokens||[void 0,void 0],se=(0,a.Z)(ae,2),le=se[0],ce=se[1],de=(0,Y.U8)(le),ue=(0,Y.U8)(ce),pe=(0,Y.U8)(q.pC[ie]),ve=Boolean(ie&&(de&&(0,u.KA)(de,v.DX[ie])||ue&&(0,u.KA)(ue,v.DX[ie]))),Ne=((0,S.mq)(),(0,m.DG)()),Ce=(0,a.Z)(Ne,1)[0],ge=(0,x.OY)(),Re=ge.independentField,xe=ge.typedValue,me=ge.otherTypedValue,fe=(0,x.Qw)(null!==de&&void 0!==de?de:void 0,null!==ue&&void 0!==ue?ue:void 0),he=fe.dependentField,be=fe.currencies,ye=fe.pair,Ee=fe.pairState,Ae=fe.currencyBalances,Ue=fe.parsedAmounts,_e=fe.price,je=fe.noLiquidity,Ye=fe.liquidityMinted,we=fe.poolTokenPercentage,ke=fe.error,Pe=(0,x.OA)(je),Be=Pe.onFieldAInput,Oe=Pe.onFieldBInput,Se=!ke,De=(0,N.useState)(!1),Te=De[0],qe=De[1],Ie=(0,N.useState)(!1),Ze=Ie[0],Le=Ie[1],Me=(0,N.useState)(null),Ke=Me[0],Ge=Me[1],Ve=(0,N.useState)(null),Fe=Ve[0],ze=Ve[1],He=(0,O.Z)(),We=(0,P.Xo)(),Xe=null===(e=(0,T.Wk)(We,"minimumUnlockedBalance").result)||void 0===e?void 0:e[0],Je=null===(n=(0,T.Wk)(We,"minimumLockedBalance").result)||void 0===n?void 0:n[0],Qe=(0,I.ZO)(u.ih.fromRawAmount(pe,null!==Je&&void 0!==Je?Je:0),6),$e=(0,I.ZO)(u.ih.fromRawAmount(pe,null!==Xe&&void 0!==Xe?Xe:0),6);(0,N.useEffect)((function(){(function(){var e=(0,r.Z)(l().mark((function e(){var n,t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(We&&te){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,We.authorized(te);case 5:return n=e.sent,e.next=8,n.wait();case 8:e.sent,ze(null),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),console.log("err",e.t0),ze(null===(t=e.t0.data)||void 0===t?void 0:t.message);case 16:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(){return e.apply(this,arguments)}})()()}),[We,te]);var en=(0,m.eq)(K),nn=(0,N.useState)(""),tn=nn[0],on=nn[1],rn=(L={},(0,o.Z)(L,Re,xe),(0,o.Z)(L,he,je?me:null!==(t=null===(s=Ue[he])||void 0===s?void 0:s.toSignificant(6))&&void 0!==t?t:""),L),an=[b.gN.CURRENCY_A,b.gN.CURRENCY_B].reduce((function(e,n){return M(M({},e),{},(0,o.Z)({},n,(0,R.iN)(Ae[n])))}),{}),sn=[b.gN.CURRENCY_A,b.gN.CURRENCY_B].reduce((function(e,n){var t,i;return M(M({},e),{},(0,o.Z)({},n,null===(t=an[n])||void 0===t?void 0:t.equalTo(null!==(i=Ue[n])&&void 0!==i?i:"0")))}),{}),ln=(0,P.Xo)(),cn=(0,d.qL)(Ue[b.gN.CURRENCY_A],null===ln||void 0===ln?void 0:ln.address),dn=(0,a.Z)(cn,2),un=dn[0],pn=dn[1],vn=(0,d.qL)(Ue[b.gN.CURRENCY_B],null===ln||void 0===ln?void 0:ln.address),Nn=(0,a.Z)(vn,2),Cn=Nn[0],gn=Nn[1],Rn=(0,B.h7)();function xn(){return mn.apply(this,arguments)}function mn(){return(mn=(0,r.Z)(l().mark((function e(){var n,t,a,s,c,d,u,v,N,C,R,x,m,h,y,E;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ie&&oe&&te&&ln){e.next=2;break}return e.abrupt("return");case 2:if(t=Ue[b.gN.CURRENCY_A],a=Ue[b.gN.CURRENCY_B],t&&a&&de&&ue&&He){e.next=5;break}return e.abrupt("return");case 5:return n={},(0,o.Z)(n,b.gN.CURRENCY_A,(0,g.uc)(t,je?p.fI:en)[0]),(0,o.Z)(n,b.gN.CURRENCY_B,(0,g.uc)(a,je?p.fI:en)[0]),s=n,de.isNative||ue.isNative?(x=ue.isNative,c=ln.estimateGas.addLiquidityETH,d=ln.addLiquidityETH,u=[null!==(N=null===(C=x?de:ue)||void 0===C||null===(R=C.wrapped)||void 0===R?void 0:R.address)&&void 0!==N?N:"",(x?t:a).quotient.toString(),s[x?b.gN.CURRENCY_A:b.gN.CURRENCY_B].toString(),s[x?b.gN.CURRENCY_B:b.gN.CURRENCY_A].toString(),te,He.toHexString()],v=f.O$.from((x?a:t).quotient.toString())):(c=ln.estimateGas.addLiquidity,d=ln.addLiquidity,u=[null!==(m=null===de||void 0===de||null===(h=de.wrapped)||void 0===h?void 0:h.address)&&void 0!==m?m:"",null!==(y=null===ue||void 0===ue||null===(E=ue.wrapped)||void 0===E?void 0:E.address)&&void 0!==y?y:"",t.quotient.toString(),a.quotient.toString(),s[b.gN.CURRENCY_A].toString(),s[b.gN.CURRENCY_B].toString(),te,He.toHexString()],v=null),Le(!0),e.next=10,c.apply(void 0,(0,i.Z)(u).concat([v?{value:v}:{}])).then(function(){var e=(0,r.Z)(l().mark((function e(n){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=M(M({},v?{value:v}:{}),{},{gasLimit:(0,g.yC)(n)}),e.next=3,d.apply(void 0,(0,i.Z)(u).concat([t]));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()).then(function(){var e=(0,r.Z)(l().mark((function e(n){var t,i,o,r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Rn(n,{summary:"Add ".concat(null===(t=Ue[b.gN.CURRENCY_A])||void 0===t?void 0:t.toSignificant(3)," ").concat(null===(i=be[b.gN.CURRENCY_A])||void 0===i?void 0:i.symbol," and ").concat(null===(o=Ue[b.gN.CURRENCY_B])||void 0===o?void 0:o.toSignificant(3)," ").concat(null===(r=be[b.gN.CURRENCY_B])||void 0===r?void 0:r.symbol)}),e.next=3,n.wait();case 3:qe(!1),Le(!1),on(n.hash);case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()).catch((function(e){Le(!1),4001===(null===e||void 0===e?void 0:e.code)?Ge("Transaction rejected."):Ge("Add Liquidity failed: ".concat(e))}));case 10:Be(""),Oe("");case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var fn=function(){var e,n,t,i;return je?(0,Z.jsx)("div",{className:"pb-4",children:(0,Z.jsxs)("div",{className:"flex items-center justify-start gap-3",children:[(0,Z.jsx)("div",{className:"sm:text-2xl text-lg font-bold text-alabaster dark:text-port-gore",children:(null===(e=be[b.gN.CURRENCY_A])||void 0===e?void 0:e.symbol)+"/"+(null===(n=be[b.gN.CURRENCY_B])||void 0===n?void 0:n.symbol)}),(0,Z.jsx)("div",{className:"sm:visible invisible",children:(0,Z.jsx)(c.ge,{currency0:de,currency1:ue,size:48})})]})}):(0,Z.jsxs)("div",{className:"pb-4",children:[(0,Z.jsxs)("div",{className:"flex items-center justify-start gap-3",children:[(0,Z.jsx)("div",{className:"sm:text-2xl text-xl font-bold text-alabaster dark:text-port-gore",children:null===Ye||void 0===Ye?void 0:Ye.toSignificant(6)}),(0,Z.jsx)("div",{className:"grid grid-flow-col gap-2 sm:visible invisible",children:(0,Z.jsx)(c.ge,{currency0:de,currency1:ue,size:48})})]}),(0,Z.jsxs)("div",{className:"sm:text-xl text-lg font-medium text-alabaster dark:text-port-gore",children:[null===(t=be[b.gN.CURRENCY_A])||void 0===t?void 0:t.symbol,"/",null===(i=be[b.gN.CURRENCY_B])||void 0===i?void 0:i.symbol,"\xa0Pool Tokens"]}),(0,Z.jsx)("div",{className:"pt-3 text-xs italic text-alabaster dark:text-port-gore",children:"Output is estimated. If the price changes by more than ".concat(en.toSignificant(4),"% your transaction\n            will revert.")})]})},hn=function(){return(0,Z.jsx)(h.E,{price:_e,currencies:be,parsedAmounts:Ue,noLiquidity:je,onAdd:xn,poolTokenPercentage:we})},bn="Supplying ".concat(null===(G=Ue[b.gN.CURRENCY_A])||void 0===G?void 0:G.toSignificant(6)," ").concat(null===(V=be[b.gN.CURRENCY_A])||void 0===V?void 0:V.symbol," and ").concat(null===(F=Ue[b.gN.CURRENCY_B])||void 0===F?void 0:F.toSignificant(6)," ").concat(null===(z=be[b.gN.CURRENCY_B])||void 0===z?void 0:z.symbol),yn=(0,N.useCallback)((function(e){var n=(0,R.Hh)(e);n===ce?re.push("/create/".concat(ce,"/").concat(le)):re.push("/create/".concat(n,"/").concat(ce))}),[ce,re,le]),En=(0,N.useCallback)((function(e){var n=(0,R.Hh)(e);le===n?ce?re.push("/create/".concat(ce,"/").concat(n)):re.push("/create/".concat(n)):re.push("/create/".concat(le||"ETH","/").concat(n))}),[le,re,ce]),An=(0,N.useCallback)((function(){qe(!1),tn&&Be(""),on("")}),[Be,tn]),Un=(0,w.G)(null===be||void 0===be?void 0:be.CURRENCY_A,null===be||void 0===be?void 0:be.CURRENCY_B),_n=be.CURRENCY_A&&""!==(null===be||void 0===be?void 0:be.CURRENCY_A.symbol)?"Input token A (".concat(null===be||void 0===be?void 0:be.CURRENCY_A.symbol,")"):"Input token A",jn=be.CURRENCY_B&&""!==(null===be||void 0===be?void 0:be.CURRENCY_B.symbol)?"Input token B (".concat(null===be||void 0===be?void 0:be.CURRENCY_B.symbol,")"):"Input token B",Yn=(0,D._h)(null!==te&&void 0!==te?te:void 0,null!==(H=be[b.gN.CURRENCY_A])&&void 0!==H?H:void 0),wn=(0,D._h)(null!==te&&void 0!==te?te:void 0,null!==(W=be[b.gN.CURRENCY_B])&&void 0!==W?W:void 0),kn=(0,N.useCallback)((function(){return Ke?(0,Z.jsx)(C.ht,{onDismiss:An,message:Ke}):(0,Z.jsx)(C.pM,{title:je?"You are creating a pool":"You will receive",onDismiss:An,topContent:fn,bottomContent:hn})}),[hn,fn,Ke]),Pn=(0,N.useState)({showApproveConfirm:!1,attemptingApproveTxn:!1,errorApproveMessage:void 0,pendingApproveText:void 0}),Bn=Pn[0],On=Bn.showApproveConfirm,Sn=Bn.errorApproveMessage,Dn=Bn.attemptingApproveTxn,Tn=Bn.pendingApproveText,qn=Pn[1],In=(0,N.useCallback)((function(e){var n;n="a"===e?pn:gn,qn((function(n){var t,i;return M(M({},n),{},{showApproveConfirm:!0,attemptingApproveTxn:!0,errorApproveMessage:void 0,pendingApproveText:(0,Z.jsxs)(Z.Fragment,{children:["Approving ".concat("a"===e?null===(t=be[b.gN.CURRENCY_A])||void 0===t?void 0:t.symbol:null===(i=be[b.gN.CURRENCY_B])||void 0===i?void 0:i.symbol),(0,Z.jsx)(c.bb,{})]})})})),n().then((function(){qn((function(e){return M(M({},e),{},{attemptingApproveTxn:!1,showApproveConfirm:!1,errorApproveMessage:void 0})}))})).catch((function(e){qn((function(e){return M(M({},e),{},{attemptingApproveTxn:!1})})),4001===(null===e||void 0===e?void 0:e.code)?qn((function(e){return M(M({},e),{},{errorApproveMessage:"Transaction rejected."})})):qn((function(e){return M(M({},e),{},{errorApproveMessage:"Approve failed: Please try again"})}))}))}),[pn,gn]),Zn=(0,N.useCallback)((function(){qn((function(e){return M(M({},e),{},{showApproveConfirm:!1})}))}),[]),Ln=(0,N.useCallback)((function(){return Sn?(0,Z.jsx)(C.ht,{onDismiss:Zn,message:Sn}):(0,Z.jsx)(C.pM,{title:"Confirm",onDismiss:Zn,topContent:function(){return""},bottomContent:function(){return""}})}),[Zn,Sn]);return(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsxs)(y.default,{children:[(0,Z.jsx)("title",{children:"Create Pool | Ruby.Exchange"}),(0,Z.jsx)("meta",{name:"description",content:"Add liquidity to the SushiSwap AMM to enable gas optimised and low slippage trades across countless networks"},"description")]}),(0,Z.jsxs)(c.W2,{id:"add-liquidity-page",className:"py-4 space-y-6 md:py-8 lg:py-12 lg:p-0 px-5",maxWidth:"2xl",children:[(0,Z.jsx)("div",{className:"flex items-center justify-between mb-5",children:(0,Z.jsx)(c.OL,{href:"/pool",children:(0,Z.jsxs)("a",{className:"flex items-center space-x-2 text-base font-medium text-center cursor-pointer text-secondary hover:text-alabaster dark:hover:text-port-gore",children:[(0,Z.jsx)("span",{children:"View Liquidity Positions"}),(0,Z.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Z.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5l7 7-7 7"})})]})})}),(0,Z.jsx)(c.bZ,{message:(0,Z.jsxs)(Z.Fragment,{children:["Mininum Locked Ruby Balance Required: ".concat(Qe),(0,Z.jsx)("br",{}),"Mininum Unlocked Ruby Balance Required: ".concat($e)]}),type:"information"}),Fe&&(0,Z.jsx)(c.bZ,{title:"Warning",message:Fe.replace("DAOPairCreator: ",""),type:"warning",diffColor:!0,showIcon:!0}),(0,Z.jsxs)("div",{className:"space-y-4 rounded",style:{zIndex:1},children:[(0,Z.jsx)(c.a3,{input:be[b.gN.CURRENCY_A],output:be[b.gN.CURRENCY_B],allowedSlippage:en,swapTitle:"Create Pool & Add Liquidity"}),(0,Z.jsx)(C.ZP,{isOpen:On,onDismiss:Zn,attemptingTxn:Dn,content:Ln,pendingText:Tn}),(0,Z.jsx)(C.ZP,{isOpen:Te,onDismiss:An,attemptingTxn:Ze,content:kn,pendingText:bn}),(0,Z.jsxs)("div",{className:"flex flex-col space-y-4",children:[ye&&Ee!==U._G.INVALID&&(0,Z.jsx)(E.Z,{input:be[b.gN.CURRENCY_A],output:be[b.gN.CURRENCY_B]}),(0,Z.jsxs)("div",{children:[(0,Z.jsx)(c.tP,{value:rn[b.gN.CURRENCY_A],onUserInput:Be,onMax:function(){var e,n;Be(null!==(e=null===(n=an[b.gN.CURRENCY_A])||void 0===n?void 0:n.toExact())&&void 0!==e?e:"")},onCurrencySelect:yn,showMaxButton:!sn[b.gN.CURRENCY_A],currency:be[b.gN.CURRENCY_A],id:"dao-add-liquidity-input-tokena",label:_n,selectedCurrencyBalance:Yn,locked:!!Fe,tokensForInputA:!0}),(0,Z.jsx)(c.Tz,{justify:"space-between",className:"py-2.5"}),(0,Z.jsx)(c.tP,{value:rn[b.gN.CURRENCY_B],onUserInput:Oe,onCurrencySelect:En,onMax:function(){var e,n;Oe(null!==(e=null===(n=an[b.gN.CURRENCY_B])||void 0===n?void 0:n.toExact())&&void 0!==e?e:"")},showMaxButton:!sn[b.gN.CURRENCY_B],currency:be[b.gN.CURRENCY_B],id:"add-liquidity-input-tokenb",label:jn,selectedCurrencyBalance:wn,locked:!!Fe})]}),be[b.gN.CURRENCY_A]&&be[b.gN.CURRENCY_B]&&Ee!==U._G.INVALID&&(0,Z.jsx)("div",{className:"p-1 rounded border border-blue-violet",children:(0,Z.jsx)(A.Z,{currencies:be,price:_e,noLiquidity:je,poolTokenPercentage:we,className:""})}),Un?(0,Z.jsx)(c.zx,{color:"gradient",size:"lg",disabled:!0,children:"Unsupported Asset"}):te?(un===d.UK.NOT_APPROVED||un===d.UK.PENDING||Cn===d.UK.NOT_APPROVED||Cn===d.UK.PENDING||Se)&&(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsxs)("div",{className:"flex justify-between gap-x-8",children:[un!==d.UK.APPROVED&&(0,Z.jsx)(c.zx,{variant:"orange",onClick:function(){return In("a")},disabled:un===d.UK.PENDING,children:un===d.UK.PENDING?(0,Z.jsx)(c.bb,{children:"Approving ".concat(null===(X=be[b.gN.CURRENCY_A])||void 0===X?void 0:X.symbol)}):"Approve ".concat(null===(J=be[b.gN.CURRENCY_A])||void 0===J?void 0:J.symbol)}),Cn!==d.UK.APPROVED&&(0,Z.jsx)(Z.Fragment,{children:void 0!==(null===(Q=be[b.gN.CURRENCY_B])||void 0===Q?void 0:Q.symbol)?(0,Z.jsx)(c.zx,{variant:"orange",onClick:function(){return In("b")},disabled:Cn===d.UK.PENDING,children:Cn===d.UK.PENDING?(0,Z.jsx)(c.bb,{children:"Approving ".concat(null===($=be[b.gN.CURRENCY_B])||void 0===$?void 0:$.symbol)}):"Approve ".concat(null===(ee=be[b.gN.CURRENCY_B])||void 0===ee?void 0:ee.symbol)}):null})]}),un===d.UK.APPROVED&&Cn===d.UK.APPROVED&&(0,Z.jsx)(c.Kd,{onClick:function(){Ce?xn():qe(!0),Ge(null)},disabled:!Se||un!==d.UK.APPROVED||Cn!==d.UK.APPROVED,error:!Se&&!!Ue[b.gN.CURRENCY_A]&&!!Ue[b.gN.CURRENCY_B],variant:"orange",children:null!==ke&&void 0!==ke?ke:"Confirm Adding Liquidity"})]}):(0,Z.jsx)(c.ck,{className:"w-full sm:text-base text-sm text-black-russian dark:text-alabaster",variant:"gradient"})]}),Un?(0,Z.jsx)(_.Z,{show:Un,currencies:[be.CURRENCY_A,be.CURRENCY_B]}):ye&&!je&&Ee!==U._G.INVALID?(0,Z.jsx)(c.WP,{showUnwrapped:ve,pair:ye}):null]})]})]})}G.Guard=(0,c.hJ)([u.a_.EUROPA]),n.default=G},66866:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/exchange/create/[[...tokens]]",function(){return t(8214)}])}},function(e){e.O(0,[2173,9774,2888,179],(function(){return n=66866,e(e.s=n);var n}));var n=e.O();_N_E=n}]);