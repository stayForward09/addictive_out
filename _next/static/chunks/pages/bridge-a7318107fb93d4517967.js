(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7869],{30691:function(e,t,n){"use strict";n.d(t,{fv:function(){return c},Hr:function(){return l}});n(59688),n(67294);var r=n(29163),a=n(84501),i=n(88891),s=n(74891),o=n(85893),c=(r.ZP.div.withConfig({displayName:"styleds__Wrapper",componentId:"sc-17ntwt8-0"})(["position:relative;padding:1rem;"]),(0,r.ZP)(s.ZT).withConfig({displayName:"styleds__ClickableText",componentId:"sc-17ntwt8-1"})([":hover{cursor:pointer;}"]),r.ZP.div.withConfig({displayName:"styleds__ArrowWrapper",componentId:"sc-17ntwt8-2"})(["padding:2px;",""],(function(e){return e.clickable?(0,r.iv)([":hover{cursor:pointer;opacity:0.8;}"]):null})),r.ZP.div.withConfig({displayName:"styleds__SectionBreak",componentId:"sc-17ntwt8-3"})(["height:1px;width:100%;"]),r.ZP.div.withConfig({displayName:"styleds__BottomGrouping",componentId:"sc-17ntwt8-4"})(["margin-top:2rem;"]));(0,r.ZP)(s.ZT).withConfig({displayName:"styleds__ErrorText",componentId:"sc-17ntwt8-5"})(["color:",";"],(function(e){var t=e.theme,n=e.severity;return 3===n||4===n?t.red1:2===n?t.yellow2:1===n?t.text3:t.green1})),r.ZP.button.withConfig({displayName:"styleds__StyledBalanceMaxMini",componentId:"sc-17ntwt8-6"})(["height:22px;width:22px;border:none;border-radius:50%;padding:0.2rem;font-size:0.875rem;font-weight:400;margin-left:0.4rem;cursor:pointer;display:flex;justify-content:center;align-items:center;float:right;:hover{}:focus{outline:none;}"]),r.ZP.span.withConfig({displayName:"styleds__Dots",componentId:"sc-17ntwt8-7"})(["&::after{display:inline-block;animation:ellipsis 1.25s infinite;content:'.';width:1em;text-align:left;}@keyframes ellipsis{0%{content:'.';}33%{content:'..';}66%{content:'...';}}"]);function l(e){var t=e.error;return(0,o.jsxs)("div",{className:"flex items-center justify-center pt-6 text-red",children:[(0,o.jsx)(a.Z,{size:16}),(0,o.jsx)("div",{className:"ml-4 text-sm",children:t})]})}(0,r.ZP)(i.ZP).withConfig({displayName:"styleds__StyledSlider",componentId:"sc-17ntwt8-8"})(["margin:0.8rem auto 2rem auto;width:95% !important;.rc-slider-mark-text{color:#575757;}.rc-slider-mark-text-active{color:#7f7f7f;}.rc-slider-rail{background-color:#202231;}.rc-slider-track{background:linear-gradient(to right,#27b0e6,#fa52a0);}.rc-slider-handle{border-color:#fa52a0;}.rc-slider-handle:hover{border-color:#fa52a0;}.rc-slider-handle-click-focused:focus{border-color:#fa52a0;}.rc-slider-dot-active{border-color:#fa52a0;}"])},84682:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(30879),a=n(28269),i=n(1427),s=n(67294);function o(){var e,t,n=(0,a.a)().account,o=(0,i.c5)(),c=(0,s.useMemo)((function(){return[null!==n&&void 0!==n?n:void 0]}),[n]),l=(0,r.Wk)(o,"isArgentWallet",c,r.DB);return null!==(e=null===l||void 0===l||null===(t=l.result)||void 0===t?void 0:t[0])&&void 0!==e&&e}},5977:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(67294),a=n(25805),i=n(74891),s=n(85893);function o(e){var t=e.isOpen,n=e.tokens,o=e.onConfirm,c=(0,r.useCallback)((function(){return null}),[]);return(0,s.jsx)(i.u_,{isOpen:t,onDismiss:c,maxHeight:90,children:(0,s.jsx)(a.W,{tokens:n,handleCurrencySelect:o})})}},69896:function(e,t,n){"use strict";n.d(t,{pM:function(){return x},ht:function(){return p}});var r=n(80318),a=n(99548),i=n(84501),s=(n(67294),n(74891)),o=n(33646),c=n(28269),l=n(13369),d=n(20181),u=n(85893),m=function(e){var t=e.onDismiss,n=e.pendingText,a=(0,d.m$)(),i=(0,r.Z)(a,1)[0];return(0,u.jsxs)("div",{children:[(0,u.jsx)("div",{className:"flex justify-end",children:(0,u.jsx)(s.Tw,{onClick:t})}),(0,u.jsx)("div",{className:"w-24 pb-4 m-auto flex justify-center",children:(0,u.jsxs)("svg",{className:"animate-spin",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,u.jsx)("circle",{className:"opacity-30",cx:"12",cy:"12",r:"10",stroke:"#6E67B6",strokeWidth:"4"}),(0,u.jsx)("path",{className:"opacity-75",fill:i?"#231E58":"#F3F2FF",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}),(0,u.jsxs)("div",{className:"flex flex-col items-center justify-center gap-3",children:[(0,u.jsx)("div",{className:"sm:text-xl text-lg font-semibold text-alabaster dark:text-port-gore",children:"Waiting for Confirmation"}),(0,u.jsx)("div",{className:"sm:text-base text-xs text-alabaster dark:text-port-gore",children:n}),(0,u.jsx)("div",{className:"sm:text-sm text-xs font-bold text-alabaster dark:text-port-gore",children:"Confirm this transaction in your wallet."}),(0,u.jsx)("div",{className:"sm:text-sm text-xs font-bold text-alabaster dark:text-port-gore -mt-3",children:"You can close this dialog after confirming."})]})]})},f=function(e){var t,n=e.onDismiss,r=e.chainId,i=e.hash,d=e.currencyToAdd,m=(0,c.a)().library,f=(0,l.Z)(d),x=f.addToken,p=f.success;return(0,u.jsxs)("div",{children:[(0,u.jsx)("div",{className:"flex justify-end hover:text-alabaster dark:hover:text-port-gore",children:(0,u.jsx)(s.Tw,{onClick:n})}),(0,u.jsx)("div",{className:"w-24 pb-4 m-auto",children:(0,u.jsx)(a.Z,{strokeWidth:.5,size:90,className:"text-blue"})}),(0,u.jsxs)("div",{className:"flex flex-col items-center justify-center gap-1",children:[(0,u.jsx)("div",{className:"sm:text-xl text-lg font-bold text-alabaster dark:text-port-gore",children:"Transaction Submitted"}),r&&i&&(0,u.jsx)(s.dL,{href:(0,o.E)(r,i,"transaction"),children:(0,u.jsx)("div",{className:"font-bold text-blue sm:text-base text-sm",children:"View on explorer"})}),d&&(null===m||void 0===m||null===(t=m.provider)||void 0===t?void 0:t.isMetaMask)&&(0,u.jsx)(s.zx,{variant:"gradient",onClick:x,className:"w-auto mt-4 font-semibold",children:p?(0,u.jsxs)(s.bs,{children:["Added ",d.symbol]}):(0,u.jsxs)(s.bs,{className:"mx-auto space-x-2",children:[(0,u.jsx)("span",{children:"Add ".concat(d.symbol," to MetaMask")}),(0,u.jsx)("img",{src:"/images/wallets/metamask.png",alt:"Add ".concat(d.symbol," to MetaMask"),width:20,height:20,className:"ml-1"})]})})]})]})},x=function(e){var t=e.title,n=e.bottomContent,r=e.onDismiss,a=e.topContent;return(0,u.jsxs)("div",{className:"grid gap-4",children:[(0,u.jsx)(s.xB,{title:t,onClose:r}),a(),n()]})},p=function(e){var t=e.message,n=e.onDismiss;return(0,u.jsxs)("div",{className:"grid gap-6",children:[(0,u.jsxs)("div",{children:[(0,u.jsxs)("div",{className:"flex justify-between",children:[(0,u.jsx)("div",{className:"text-lg font-medium text-alabaster",children:"Error"}),(0,u.jsx)(s.Tw,{onClick:n})]}),(0,u.jsxs)("div",{className:"flex flex-col items-center justify-center gap-3",children:[(0,u.jsx)(i.Z,{className:"text-red",style:{strokeWidth:1.5},size:64}),(0,u.jsx)("div",{className:"font-bold text-red",children:t})]})]}),(0,u.jsx)("div",{children:(0,u.jsx)(s.zx,{color:"gradient",size:"lg",onClick:n,children:"Dismiss"})})]})};t.ZP=function(e){var t=e.isOpen,n=e.onDismiss,r=e.attemptingTxn,a=e.hash,i=e.pendingText,o=e.content,l=e.currencyToAdd,d=(0,c.a)().chainId;return d?(0,u.jsx)(s.u_,{isOpen:t,onDismiss:n,maxHeight:90,maxWidth:500,children:r?(0,u.jsx)(m,{onDismiss:n,pendingText:i}):a?(0,u.jsx)(f,{chainId:d,hash:a,onDismiss:n,currencyToAdd:l}):t?o():null}):null}},31862:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return se}});var r=n(92809),a=n(80318),i=n(30266),s=n(809),o=n.n(s),c=n(74891),l=n(99952),d=n(26367),u=n(73574),m=n(67294),f=n(66269),x=n(26517),p=n(29268),h=n(82989),g=n(28269),b=n(72319),v=n(2593),y=n(77616);function N(){return(0,p.C)((function(e){return e.bridge}))}var j=n(69896),E=n(30691),w=n(85893);function C(e){var t=e.bridgeData,n=e.onConfirm,r=e.bridgeErrorMessage;return(0,w.jsxs)("div",{className:"p-6 mt-0 -m-6 rounded bg-black-russian dark:bg-light",children:[(0,w.jsx)(c.Kd,{onClick:n,id:"confirm-bridge-or-send",className:"text-h2 font-medium",children:t.shouldRetreiveEth?"Claim ETH":"Confirm Bridging"}),r?(0,w.jsx)(E.Hr,{error:r}):null]})}var k=n(55517);function A(e){var t=e.bridgeData,n=(e.recipient,(0,m.useState)(!1));n[0],n[1],(0,k.N)(t.inputAmount);return(0,w.jsx)("div",{className:"grid gap-4",children:(0,w.jsx)("div",{className:"grid gap-2",children:(0,w.jsxs)("div",{className:"flex items-center justify-between",children:[(0,w.jsxs)("div",{className:"flex items-center gap-3",children:[(0,w.jsx)(c.Xw,{currency:t.currency,size:48}),(0,w.jsx)("div",{className:"overflow-ellipsis w-[220px] overflow-hidden font-bold text-lg text-alabaster dark:text-port-gore",children:t.inputAmount.toSignificant(6)})]}),(0,w.jsx)("div",{className:"font-medium text-alabaster dark:text-port-gore",children:t.currency.symbol})]})})})}function T(e){var t,n,r=e.bridgeData,a=e.onConfirm,i=e.onDismiss,s=e.recipient,o=e.bridgeErrorMessage,c=e.isOpen,l=e.attemptingTxn,d=(0,m.useCallback)((function(){return r?(0,w.jsx)(A,{bridgeData:r,recipient:s}):null}),[s,r]),u=(0,m.useCallback)((function(){return r?(0,w.jsx)(C,{onConfirm:a,bridgeData:r,bridgeErrorMessage:o}):null}),[a,o,r]),f=null!==r&&void 0!==r&&r.shouldRetreiveEth?"Claim ETH":"Bridging ".concat(null===r||void 0===r||null===(t=r.inputAmount)||void 0===t?void 0:t.toSignificant(6)," ").concat(null===r||void 0===r||null===(n=r.currency)||void 0===n?void 0:n.symbol),x=(0,m.useCallback)((function(){return o?(0,w.jsx)(j.ht,{onDismiss:i,message:o}):(0,w.jsx)(j.pM,{title:null!==r&&void 0!==r&&r.shouldRetreiveEth?"Claim ETH":"Confirm Bridging",onDismiss:i,topContent:d,bottomContent:u})}),[i,u,d,o]);return(0,w.jsx)(j.ZP,{isOpen:c,onDismiss:i,attemptingTxn:l,content:x,pendingText:f})}var _,I=n(9008),O=n(5977),M=n(73832),P=n(84682),D=n(11163),R=n(44965),S=n(47786),H=n(19190),B=n(92855),U=n(3283),Z=n.n(U),V=n(88807),K=n(28693),W=n(89638),F=n(1427),z=n(99123),L=n(78828);function Y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function G(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function $(e){var t=(0,g.a)(),n=t.account,r=t.chainId,a=t.library,s=(0,z.h7)(),c=function(e){var t=(0,g.a)(),n=t.account,r=t.chainId,a=t.library,i=(0,F._L)(),s=(0,F.ts)(),o=(0,F.x0)(),c=(0,F.oH)();return(0,m.useMemo)((function(){return a&&n&&r&&e&&i&&o&&s&&c?r===d.a_.RINKEBY&&"ETH"===e.currency.symbol&&e.shouldRetreiveEth?{address:i.address,calldata:i.interface.encodeFunctionData("getMyEth",[])}:r!==d.a_.RINKEBY||"ETH"!==e.currency.symbol||e.shouldRetreiveEth?r===d.a_.RINKEBY&&"ETH"!==e.currency.symbol?{address:s.address,calldata:s.interface.encodeFunctionData("depositERC20",[u.tf,u._j[e.currency.symbol][d.a_.RINKEBY],e.amount])}:r===d.a_.MAINNET&&"ETH"===e.currency.symbol&&e.shouldRetreiveEth?{address:i.address,calldata:i.interface.encodeFunctionData("getMyEth",[])}:r!==d.a_.MAINNET||"ETH"!==e.currency.symbol||e.shouldRetreiveEth?r===d.a_.MAINNET&&"ETH"!==e.currency.symbol?{address:s.address,calldata:s.interface.encodeFunctionData("depositERC20",[u.tf,u._j[e.currency.symbol][d.a_.MAINNET],e.amount])}:r===d.a_.RUBY_NEW_SCHAIN&&"ETH"===e.currency.symbol?{address:o.address,calldata:o.interface.encodeFunctionData("exitToMain",[e.amount])}:r===d.a_.RUBY_NEW_SCHAIN&&"ETH"!==e.currency.symbol?{address:c.address,calldata:c.interface.encodeFunctionData("exitToMainERC20",[u._j[e.currency.symbol][d.a_.RINKEBY],e.amount])}:r===d.a_.EUROPA&&"ETH"===e.currency.symbol?{address:o.address,calldata:o.interface.encodeFunctionData("exitToMain",[e.amount])}:r===d.a_.EUROPA&&"ETH"!==e.currency.symbol?{address:c.address,calldata:c.interface.encodeFunctionData("exitToMainERC20",[u._j[e.currency.symbol][d.a_.MAINNET],e.amount])}:void 0:{address:i.address,calldata:i.interface.encodeFunctionData("deposit",[u.tf]),value:e.amount.toHexString()}:{address:i.address,calldata:i.interface.encodeFunctionData("deposit",[u.tf]),value:e.amount.toHexString()}:null}),[n,r,a,i,s,o,c,e])}(e);return(0,m.useMemo)((function(){return a&&n&&r?{state:_.VALID,callback:function(){var t=(0,i.Z)(o().mark((function t(){var r,l,u;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=c.address,l=c.calldata,u=c.value,t.abrupt("return",a.call({from:n,to:r,data:l,gasPrice:void 0}).then((function(t){return a.getSigner().sendTransaction(G({from:n,to:r,data:l,gasPrice:void 0},u&&!(0,d.Fr)(u)?{value:u}:{})).then(function(){var t=(0,i.Z)(o().mark((function t(n){var r,a,i,c,l;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.currency.symbol,a=e.inputAmount.toSignificant(4),i=L.b[e.fromChainId].chainName,c=L.b[e.toChainId].chainName,l=e.shouldRetreiveEth?"Claimed ETH":"Bridging ".concat(a," ").concat(r," from ").concat(i," to ").concat(c),s(n,{summary:l}),t.next=8,n.wait();case 8:return t.abrupt("return",n);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){throw 4001===(null===e||void 0===e?void 0:e.code)?new Error("Transaction rejected."):(console.error("Bridging failed",e,r,l,u),new Error("Bridging failed: ".concat(e)))}))})).catch((function(e){throw e})));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),error:null}:{state:_.INVALID,callback:null,error:"Missing dependencies"}}),[a,n,r,c])}!function(e){e[e.INVALID=0]="INVALID",e[e.LOADING=1]="LOADING",e[e.VALID=2]="VALID"}(_||(_={}));var X=n(86658),q=n(54663),Q=n(94144),J=n(20181),ee=n(57496),te=n(17704),ne=n(56371);function re(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ae(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?re(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):re(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ie(){var e,t=function(){var e=(0,g.a)().chainId,t=(0,p.T)(),n=(0,m.useState)(),r=n[0],a=n[1],i=N();return(0,m.useEffect)((function(){var n,r;e&&(i.currencyId,e===d.a_.MAINNET?(n=d.a_.MAINNET,r=d.a_.EUROPA):e===d.a_.RINKEBY?(n=d.a_.RINKEBY,r=d.a_.RUBY_NEW_SCHAIN):e===d.a_.EUROPA?(n=d.a_.EUROPA,r=d.a_.MAINNET):e===d.a_.RUBY_NEW_SCHAIN?(n=d.a_.RUBY_NEW_SCHAIN,r=d.a_.RINKEBY):(n=d.a_.EUROPA,r=d.a_.MAINNET),t((0,x.HK)({typedValue:i.typedValue,inputNetworkId:n,outputNetworkId:r,currencyId:"ETH"})),a("ETH"))}),[t,e]),r}(),n=(0,f.U8)(t),s=(0,m.useState)(!1),E=s[0],C=s[1],k=(0,m.useMemo)((function(){var e,t;return null!==(e=null===(t=[n])||void 0===t?void 0:t.filter((function(e){var t;return null!==(t=null===e||void 0===e?void 0:e.isToken)&&void 0!==t&&t})))&&void 0!==e?e:[]}),[n]),A=(0,m.useCallback)((function(){C(!0)}),[]),_=(0,f.e_)(),U=k&&k.filter((function(e){return!Boolean(e.address in _)})),F=(0,m.useState)(null),z=F[0],Y=F[1],G=(0,m.useState)(null),re=G[0],ie=G[1],se=(0,m.useState)("0"),oe=se[0],ce=se[1],le=(0,m.useState)(null),de=le[0],ue=le[1],me=(0,m.useState)(null),fe=me[0],xe=me[1],pe=(0,m.useState)(!1),he=(pe[0],pe[1]),ge=(0,m.useState)(null),be=ge[0],ve=ge[1],ye=(0,m.useState)(null),Ne=ye[0],je=ye[1],Ee=(0,m.useState)("0"),we=Ee[0],Ce=Ee[1],ke=(0,ee.Z)(),Ae=ke.toggleMetaPortWidget,Te=ke.closeMetaportWidget,_e=(0,te.Z)(),Ie=_e.width>640,Oe=(_e.width,function(){var e=(0,m.useState)(),t=e[0],n=e[1],r=(0,q.Ov)();return(0,m.useEffect)((function(){new(Z())(L.b[d.a_.MAINNET].rpcUrls[0]).eth.getGasPrice().then((function(e){return n(d.ih.fromRawAmount(u.B5[d.a_.MAINNET],e))}))}),[r]),t}()),Me=(0,m.useState)("bridge"),Pe=Me[0],De=Me[1],Re=(0,q.Ov)(),Se=(0,g.a)(),He=Se.account,Be=Se.chainId,Ue=(0,D.useRouter)(),Ze=N().typedValue,Ve=function(){var e,t=(0,g.a)().account,n=N(),a=n.typedValue,i=n.currencyId,s=n[x.Vu.IN_CHAIN].networkId,o=n[x.Vu.OUT_CHAIN].networkId,c=(0,f.U8)(i),l=(0,b.K5)(null!==t&&void 0!==t?t:void 0,[null!==c&&void 0!==c?c:void 0]),u=(0,h.e)(a,c),m=v.O$.from(0);try{m=a&&""!==a&&c?y.parseUnits(a,c.decimals):v.O$.from(0)}catch(C){}var p,j,E,w=l[0];return t||(p="Connect Wallet"),u||(p=null!==(j=p)&&void 0!==j?j:"Enter an amount"),c||(p=null!==(E=p)&&void 0!==E?E:"Select a token"),w&&u&&w.lessThan(u)&&(p="Insufficient ".concat(c.symbol," balance")),{currency:c,currencyBalance:w,parsedAmount:u,weiAmountBn:m,inputError:p,chains:(e={},(0,r.Z)(e,x.Vu.IN_CHAIN,d.a_[s]),(0,r.Z)(e,x.Vu.OUT_CHAIN,d.a_[o]),e)}}(),Ke=Ve.currency,We=Ve.currencyBalance,Fe=Ve.parsedAmount,ze=Ve.weiAmountBn,Le=Ve.inputError,Ye=Ve.chains,Ge=u.B5[d.a_.EUROPA];(0,m.useEffect)((function(){if(Be){var e=d.a_.MAINNET,t=d.a_.EUROPA,n=new(Z())(H.rP[e]),r=new(Z())(H.rP[t]),a=new B.MainnetChain(n,K),i=new B.SChain(r,V);Be===d.a_.MAINNET?(ie(e),Y(a),ve(i),je(t)):(ie(t),Y(i),ve(a),je(e))}}),[Be]);var $e=(0,m.useCallback)((0,i.Z)(o().mark((function e(){var t,n,r,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(z&&be&&re&&He)){e.next=22;break}if(t=0,n=0,re!==d.a_.MAINNET){e.next=12;break}return e.next=6,z.reimbursementWalletBalance(He,u.tf);case 6:return t=e.sent,e.next=9,z.contracts.communityPool.methods.getRecommendedRechargeAmount((0,ne.keccak256)((0,ne.toUtf8Bytes)(u.tf)),He).call();case 9:n=e.sent,e.next=18;break;case 12:return e.next=14,be.reimbursementWalletBalance(He,u.tf);case 14:return t=e.sent,e.next=17,be.contracts.communityPool.methods.getRecommendedRechargeAmount((0,ne.keccak256)((0,ne.toUtf8Bytes)(u.tf)),He).call();case 17:n=e.sent;case 18:r=d.ih.fromRawAmount(Ge,t),a=d.ih.fromRawAmount(Ge,n),ue(r),xe(a);case 22:case"end":return e.stop()}}),e)}))),[re,Be,He]);(0,m.useEffect)((function(){He&&re&&Be&&Ge&&$e()}),[He,re,Be,Ge]);var Xe=(0,m.useCallback)(function(){var e=(0,i.Z)(o().mark((function e(t){var n,r,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("ETH"!==(null===Ke||void 0===Ke?void 0:Ke.symbol)||!z||re!==d.a_.MAINNET){e.next=9;break}return e.next=3,z.lockedETHAmount(He);case 3:n=e.sent,r=v.O$.from(n),a=y.formatEther(r),r.gt(0)&&he(!0),ce(a),ce(a);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[re,Ke,He]);(0,m.useEffect)((function(){Ke&&re&&He&&Re&&Xe(Re)}),[re,Ke,He,Re]);var qe={currency:Ke,fromChainId:Be,toChainId:Ne,amount:ze,inputAmount:Fe,shouldRetreiveEth:!1},Qe=(0,b._h)(null!==He&&void 0!==He?He:void 0,null!==Ke&&void 0!==Ke?Ke:void 0),Je=function(){var e=(0,p.T)(),t=(0,m.useCallback)((function(t){var n={currencyId:t.isToken?t.address:t.isNative&&t.chainId?"ETH":""};e((0,x.j)(n))}),[e]);return{onSwitchBridgeSides:(0,m.useCallback)((function(){e((0,x.Qi)())}),[e]),onCurrencySelection:t,onUserInput:(0,m.useCallback)((function(t){e((0,x.LC)({typedValue:t}))}),[e]),onSetNetworkId:(0,m.useCallback)((function(t,n){e((0,x.V9)({chainField:t,networkId:n}))}),[e])}}(),et=Je.onCurrencySelection,tt=Je.onUserInput,nt=!Le,rt=(0,m.useCallback)((function(e){tt(e)}),[tt]),at=(0,m.useCallback)((0,i.Z)(o().mark((function e(){var t,n,r,a,i,s,c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(Ne&&be&&Ke&&He&&Be&&Ne!==Be)){e.next=18;break}if("ETH"!==(null===Ke||void 0===Ke?void 0:Ke.symbol)){e.next=10;break}return e.next=4,be.ethBalance(He);case 4:t=e.sent,n=v.O$.from(t),r=y.formatEther(n),Ce(r),e.next=18;break;case 10:if("ETH"===(null===Ke||void 0===Ke?void 0:Ke.symbol)){e.next=18;break}return a=new be.web3.eth.Contract(W,u._j[Ke.symbol][Ne]),e.next=14,a.methods.balanceOf(He).call();case 14:i=e.sent,s=v.O$.from(i),c=y.formatUnits(s,Ke.decimals),Ce(c);case 18:case"end":return e.stop()}}),e)}))),[Ne,Ke,He]);(0,m.useEffect)((function(){Ke&&Ne&&He&&at()}),[Ne,Ke,He]);var it=(0,m.useState)({showConfirm:!1,bridgingToConfirm:void 0,attemptingTxn:!1,bridgeErrorMessage:void 0,txHash:void 0}),st=it[0],ot=st.showConfirm,ct=st.bridgingToConfirm,lt=st.bridgeErrorMessage,dt=st.attemptingTxn,ut=st.txHash,mt=it[1],ft=Ze,xt=(0,l.GD)(qe),pt=(0,a.Z)(xt,2),ht=pt[0],gt=pt[1],bt=(0,m.useState)({showApproveConfirm:!1,attemptingApproveTxn:!1,errorApproveMessage:void 0,pendingApproveText:void 0}),vt=bt[0],yt=vt.showApproveConfirm,Nt=vt.errorApproveMessage,jt=vt.attemptingApproveTxn,Et=vt.pendingApproveText,wt=bt[1],Ct=(0,m.useCallback)((function(){wt((function(e){return ae(ae({},e),{},{showApproveConfirm:!0,attemptingApproveTxn:!0,errorApproveMessage:void 0,pendingApproveText:(0,w.jsx)(c.bb,{children:"Approving ".concat(null===Ke||void 0===Ke?void 0:Ke.symbol)})})})),gt().then((function(){wt((function(e){return ae(ae({},e),{},{attemptingApproveTxn:!1,showApproveConfirm:!1,errorApproveMessage:void 0})}))})).catch((function(e){wt((function(e){return ae(ae({},e),{},{attemptingApproveTxn:!1})})),4001===(null===e||void 0===e?void 0:e.code)?wt((function(e){return ae(ae({},e),{},{errorApproveMessage:"Transaction rejected."})})):wt((function(e){return ae(ae({},e),{},{errorApproveMessage:"Approve failed: Please try again"})}))}))}),[Be,gt]),kt=(0,m.useCallback)((function(){wt((function(e){return ae(ae({},e),{},{showApproveConfirm:!1})}))}),[]),At=(0,m.useCallback)((function(){return Nt?(0,w.jsx)(j.ht,{onDismiss:kt,message:Nt}):(0,w.jsx)(j.pM,{title:"Confirm",onDismiss:kt,topContent:function(){return""},bottomContent:function(){return""}})}),[kt,Nt]),Tt=(0,m.useState)(!1),_t=Tt[0],It=Tt[1];(0,m.useEffect)((function(){ht===l.UK.PENDING&&It(!0)}),[ht,_t]);var Ot=(0,M.iN)(We,Oe),Mt=$(ct),Pt=Mt.callback,Dt=Mt.error,Rt=(0,m.useCallback)((function(){Pt&&(mt((function(e){return ae(ae({},e),{},{attemptingTxn:!0,bridgeErrorMessage:void 0,txHash:void 0})})),Pt().then((function(e){mt((function(t){return ae(ae({},t),{},{bridgeErrorMessage:void 0,txHash:e.hash})})),he(!1),e.wait(1).then((function(e){mt((function(e){return ae(ae({},e),{},{attemptingTxn:!1,showConfirm:!1})})),ct.shouldRetreiveEth||1!==e.status||(0,X.S)(d.a_[Ye[x.Vu.OUT_CHAIN]])}))})).catch((function(e){mt((function(t){var n;return ae(ae({},t),{},{attemptingTxn:!1,bridgeErrorMessage:null!==e&&void 0!==e&&null!==(n=e.data)&&void 0!==n&&n.message?"".concat("Recipient must be active"===e.data.message?"You need to add ETH to your Gas Wallet":"You may only bridge once every 5 minutes"):e.toString(),txHash:void 0})}))})))}),[Pt,ct,ot,He,null===ct||void 0===ct||null===(e=ct.currency)||void 0===e?void 0:e.symbol]),St=!(0,P.Z)()&&!Le&&(ht===l.UK.NOT_APPROVED||ht===l.UK.PENDING||_t&&ht===l.UK.APPROVED),Ht=(0,m.useCallback)((function(){mt((function(e){return ae(ae({},e),{},{showConfirm:!1})})),ut&&tt("")}),[dt,tt,lt,ct,ut]),Bt=(0,m.useCallback)((function(e){It(!1),et(e)}),[et]),Ut=(0,m.useCallback)((function(){Ot&&tt(Ot.toExact())}),[Ot,tt]),Zt=(0,J.m$)(),Vt=(0,a.Z)(Zt,1)[0];return(0,w.jsxs)(c.W2,{id:"bridge-page",className:"lg:pt-61px md:py-12 py-8 xl:px-0 px-5",maxWidth:"2xl",children:[(0,w.jsxs)(I.default,{children:[(0,w.jsx)("title",{children:"Bridge | Ruby.Exchange"}),(0,w.jsx)("meta",{name:"description",content:"The Ruby Bridge allows for seamless token transfers between Ethereum and the Ruby Skale chain."},"description")]}),(0,w.jsx)(j.ZP,{isOpen:yt,onDismiss:kt,attemptingTxn:jt,content:At,pendingText:Et}),(0,w.jsx)(O.Z,{isOpen:U.length>0&&!E,tokens:U,onConfirm:A}),(0,w.jsx)(T,{isOpen:ot,bridgeData:ct,attemptingTxn:dt,onConfirm:Rt,bridgeErrorMessage:lt,recipient:He,onDismiss:Ht}),(0,w.jsxs)("div",{className:"border border-blue-violet rounded-[10px] p-[26px]",children:[(0,w.jsxs)("div",{className:"flex flex-wrap justify-start gap-x-5 gap-y-2.5 mb-[16px]",children:[(0,w.jsxs)("p",{onClick:function(){Te(),De("bridge")},className:(0,d.AK)("bridge"===Pe?"border-b border-amaranth":"border-0","hover:border-b hover:border-amaranth sm:text-base text-sm font-semibold text-light dark:text-port-gore hover:cursor-pointer pb-2 flex"),children:["Bridge"," ",(0,w.jsx)(c.sE,{text:"Use the mainnet bridge to transfer tokens between the Europa SKALE Chain and Ethereum L1. This will require a gas fee.",id:"BridgeTabs"})]}),Ie&&(0,w.jsxs)("p",{onClick:function(){Ae(),De("metaport")},className:(0,d.AK)("metaport"===Pe?"border-b border-amaranth":"border-0","hover:border-b hover:border-amaranth flex justify-center sm:text-base text-sm font-semibold text-light dark:text-port-gore relative hover:cursor-pointer pb-2"),children:["Metaport"," ",(0,w.jsx)(c.sE,{text:"Metaport is SKALE's interchain\n                    widget. Transfer tokens directly\n                    between SKALE Chains, instantly\n                     and with zero gas fees.",id:"BridgeTabs"})]}),(0,w.jsxs)("p",{onClick:function(){Te(),Ue.push("/bridge/tokens")},className:"sm:text-base text-sm font-semibold text-amaranth relative flex justify-center cursor-pointer",children:["Tokens"," ",(0,w.jsx)(c.sE,{text:(0,w.jsxs)("p",{children:["Select a token and SKALE Chain to add an asset to MetaMask.",(0,w.jsx)("br",{}),"The SKALE Network is made up of many independent chains, bridged by Metaport. Each chain you use, and the tokens on it, must be added to MetaMask."]}),id:"BridgeTabs"})]})]}),"bridge"===Pe?(0,w.jsxs)("div",{children:[(0,w.jsx)(c.wY,{label:"".concat(R.z[d.a_[Ye[x.Vu.IN_CHAIN]]]),value:ft,currency:Ke,onUserInput:rt,onMax:Ut,onCurrencySelect:Bt,otherCurrency:Ke,showSearchBox:!1,chainId:d.a_[Ye[x.Vu.IN_CHAIN]],selectedCurrencyBalance:Qe}),(0,w.jsx)("div",{className:"flex",children:(0,w.jsx)(c.zx,{size:"switchIcon",onClick:function(){(0,X.S)(d.a_[Ye[x.Vu.OUT_CHAIN]]),tt("0.0")},className:"rounded-full mx-auto w-max -mt-6 z-10",disabled:!He,variant:"violet",children:(0,w.jsx)(Q.Z,{className:"sm:w-[22px] sm:h-[22px] w-[18px] h-[18px]",fill:Vt?"#FFFFFF":"#02001F"})})}),(0,w.jsx)("div",{className:"mt-[15px]",children:(0,w.jsx)(c.gW,{altChainAmount:we,bridgeValue:Fe,label:"".concat(R.z[d.a_[Ye[x.Vu.OUT_CHAIN]]]),currency:Ke,id:"bridge-currency-output",chainId:d.a_[Ye[x.Vu.OUT_CHAIN]],onCurrencySelect:Bt})}),(0,w.jsx)("div",{className:"block",children:(0,w.jsxs)("div",{className:"mt-[26px]",children:[He?St?(0,w.jsxs)(c.m0,{children:[ht!==l.UK.APPROVED&&(0,w.jsx)(c.gn,{onClick:Ct,disabled:ht!==l.UK.NOT_APPROVED||_t,variant:"orange",children:ht===l.UK.PENDING?(0,w.jsx)(c.BA,{gap:"6px",justify:"center",children:(0,w.jsxs)("div",{className:"flex items-center",children:["Approving ",(0,w.jsx)(c.aN,{stroke:"white",className:"my-auto ml-2.5"})]})}):"Approve ".concat(null===Ke||void 0===Ke?void 0:Ke.symbol)}),ht===l.UK.APPROVED&&(0,w.jsxs)(c.Kd,{onClick:function(){mt({bridgingToConfirm:{currency:Ke,fromChainId:Be,toChainId:Ne,amount:ze,inputAmount:Fe,shouldRetreiveEth:!1},attemptingTxn:!1,bridgeErrorMessage:void 0,showConfirm:!0,txHash:void 0})},style:{width:"100%"},id:"bridge-button",disabled:!nt||ht!==l.UK.APPROVED,error:nt,variant:"orange",children:["Bridge ",R.z[d.a_[Ye[x.Vu.IN_CHAIN]]]," to"," ",R.z[d.a_[Ye[x.Vu.OUT_CHAIN]]]]})]}):(0,w.jsx)(c.Kd,{onClick:function(){mt({bridgingToConfirm:{currency:Ke,fromChainId:Be,toChainId:Ne,amount:ze,inputAmount:Fe,shouldRetreiveEth:!1},attemptingTxn:!1,bridgeErrorMessage:void 0,showConfirm:!0,txHash:void 0})},id:"bridge-button",disabled:!nt||!!Dt,error:nt&&!Dt,variant:"orange",children:Le||"TRANSFER"}):(0,w.jsx)(c.ck,{className:"w-full sm:text-base text-sm text-black-russian dark:text-alabaster",variant:"gradient"}),St&&(0,w.jsx)(c.sg,{style:{marginTop:"1rem"},children:(0,w.jsx)(c.tI,{steps:[ht===l.UK.APPROVED]})})]})})]}):(0,w.jsx)(c.bZ,{message:(0,w.jsxs)("p",{children:["Transfer tokens directly between ",(0,w.jsx)("b",{children:"SKALE"})," Chains using the ",(0,w.jsx)("b",{children:"Metaport"})," widget in the bottom right-hand corner of the page."]}),type:"information",id:"bridge",showIcon:!0,dismissable:!1})]}),"bridge"===Pe&&(0,w.jsxs)("div",{className:"grid sm:grid-cols-2 gap-x-6 mt-6",children:[(0,w.jsxs)("div",{className:"bg-port-gore dark:bg-light rounded-[10px] p-[16px]",children:[(0,w.jsxs)("p",{className:"sm:text-sm text-xs font-normal text-light dark:text-port-gore flex items-center",children:["Complete Europa ",">"," Eth mainnet"," ",(0,w.jsx)(c.sE,{text:"Click Claim to unwrap your ETH and complete the bridging operation.",id:!0})]}),(0,w.jsxs)("div",{className:"mt-[16px] bg-black-russian dark:bg-white rounded-[5px] p-2.5 flex justify-between items-center",children:[(0,w.jsxs)("p",{className:"font-bold sm:text-base text-sm text-light dark:text-port-gore",children:[oe," ETH"]}),(0,w.jsx)("button",{className:"bg-port-gore dark:bg-light px-2.5 py-[5px] rounded-[5px] font-normal sm:text-sm text-xs text-light dark:text-port-gore hover:shadow-10px",onClick:function(){mt({bridgingToConfirm:{currency:Ke,fromChainId:Be,toChainId:Ne,amount:oe&&""!==oe&&Ke?y.parseUnits(oe,Ke.decimals):v.O$.from(0),inputAmount:(0,h.e)(oe,Ke),shouldRetreiveEth:!0},attemptingTxn:!1,bridgeErrorMessage:void 0,showConfirm:!0,txHash:void 0})},id:"bridge-button",disabled:ct&&ct.shouldRetreiveEth,children:"Claim"})]})]}),(0,w.jsxs)("div",{className:"bg-port-gore dark:bg-light rounded-[10px] p-[16px] sm:mt-0 mt-6",children:[(0,w.jsxs)("p",{className:"sm:text-sm text-xs font-normal text-light dark:text-port-gore flex items-center",children:["Gas Wallet balance ",(0,w.jsx)(c.sE,{id:"GasWalletInfo",text:"",rechargeAmount:fe})]}),(0,w.jsxs)("div",{className:"mt-[16px] bg-black-russian dark:bg-white rounded-[5px] p-2.5 flex justify-between items-center",children:[(0,w.jsxs)("p",{className:(0,d.AK)("font-bold sm:text-base text-sm dark:text-port-gore",null!==fe&&void 0!==fe&&fe.greaterThan(0)?"text-amaranth":"text-light"),children:[He?(0,w.jsx)("b",{children:de&&(0,S.ZO)(de,4)}):0," ","ETH"]}),(0,w.jsx)("button",{className:"bg-port-gore dark:bg-light px-2.5 py-[5px] rounded-[5px] font-normal sm:text-sm text-xs text-light dark:text-port-gore hover:shadow-10px",onClick:function(){Ue.push("/communityPoolStats")},children:"Manage"})]})]})]})]})}ie.Guard=(0,c.KF)([d.a_.MAINNET,d.a_.EUROPA]);var se=ie},23373:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/bridge",function(){return n(31862)}])},8596:function(){},89214:function(){},52361:function(){},94616:function(){},40770:function(){},16582:function(){}},function(e){e.O(0,[3482,2894,3283,2855,9774,2888,179],(function(){return t=23373,e(e.s=t);var t}));var t=e.O();_N_E=t}]);