(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7232],{87234:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return B}});var n=r(92809),s=r(83789),o=r(74891),a=r(9008),i=r(26367),l=r(30463),c=r(73574),u=r(30879),d=r(67294),p=r(2212),x=r(80318),f=r(26270),m=r(77854),h=r(89e3),v=r(66037),b=r(70052),j=r(16434),g=r(360),N=r(20181),y=r(85893);function w(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function O(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?w(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function k(e){var t=e.cutGems,r=e.generativeGems,n=(0,d.useMemo)((function(){return t||r?Math.ceil(Math.sqrt(t.length+r.length)):1}),[t,r]),s=(0,N.m$)(),o=(0,x.Z)(s,1)[0],a=function(){return(0,y.jsx)(m.V,{center:!0,children:(0,y.jsx)("div",{className:"mt-6 w-24 pb-4 m-auto flex justify-center",children:(0,y.jsxs)("svg",{className:"animate-spin",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,y.jsx)("circle",{className:"opacity-30",cx:"12",cy:"12",r:"10",stroke:"#6E67B6",strokeWidth:"4"}),(0,y.jsx)("path",{className:"opacity-75",fill:o?"#231E58":"#F3F2FF",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})})})};return(0,y.jsxs)(f.Xz,{gl:{antialias:!0},camera:{position:[0,3*n,0]},children:[(0,y.jsxs)(d.Suspense,{fallback:(0,y.jsx)(a,{}),children:[(0,y.jsx)("group",{children:(0,y.jsxs)(h.M,{children:[t&&(0,y.jsx)(y.Fragment,{children:t.map((function(e,t){return(0,y.jsx)("group",{position:[t%n*4,0,4*Math.floor(t/n)],children:(0,y.jsx)(j.Z,O({},e))},"gemstone-"+e.type+"-"+t)}))}),r&&(0,y.jsx)(y.Fragment,{children:r.map((function(e,r){return(0,y.jsx)("group",{position:[(t.length+r)%n*4,0,4*Math.floor((t.length+r)/n)],scale:.4,children:(0,y.jsx)(g.Z,O({},e))},"gemstone-"+e.seed+"-"+r)}))})]})}),(0,y.jsx)(v.z,{}),(0,y.jsx)(b.q,{files:"/images/textures/forest_slope_1k.hdr"})]}),(0,y.jsx)("directionalLight",{intensity:.5})]})}var S,I=r(30266),D=r(809),F=r.n(D),P=function(e){var t=e.onDismiss,r=e.isOpen,n=e.isError,s=e.action,a=(0,N.m$)(),i=(0,x.Z)(a,1)[0];return(0,y.jsx)(o.u_,{isOpen:r,onDismiss:t,maxHeight:90,children:(0,y.jsxs)("div",{children:[(0,y.jsx)("div",{className:"flex justify-end",children:(0,y.jsx)(o.Tw,{onClick:t})}),!n&&(0,y.jsx)("div",{className:"w-24 pb-4 m-auto flex justify-center",children:(0,y.jsxs)("svg",{className:"animate-spin",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,y.jsx)("circle",{className:"opacity-30",cx:"12",cy:"12",r:"10",stroke:"#6E67B6",strokeWidth:"4"}),(0,y.jsx)("path",{className:"opacity-75",fill:i?"#231E58":"#F3F2FF",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}),n?(0,y.jsxs)("div",{className:"flex flex-col items-center justify-center gap-3",children:[(0,y.jsx)("p",{className:"sm:text-xl text-lg font-semibold text-alabaster dark:text-port-gore",children:"Error"}),(0,y.jsx)("p",{className:"sm:text-sm text-xs font-bold text-alabaster dark:text-port-gore",children:"An error occurred while processing MFT."})]}):(0,y.jsxs)("div",{className:"flex flex-col items-center justify-center gap-3",children:[(0,y.jsxs)("p",{className:"sm:text-xl text-lg font-semibold text-alabaster dark:text-port-gore",children:[s,"ing NFT"]}),(0,y.jsx)("p",{className:"sm:text-sm text-xs font-bold text-alabaster dark:text-port-gore",children:"Please wait while your NFT is processed."})]})]})})},E=r(28269),M=r(99123),_=r(49161);function A(e){var t=e.isOpen,r=e.close,n=e.action,s=e.type,a=e.tokenId,l=e.closeModal,u=(0,d.useState)(""),p=u[0],x=u[1],f=function(e,t,r,n){var s=(0,E.a)(),o=s.account,a=s.chainId,l=s.library,u=(0,d.useState)(null),p=u[0],x=u[1],f=(0,M.h7)();function m(){return h.apply(this,arguments)}function h(){return(h=(0,I.Z)(F().mark((function t(){return F().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,s){var a="Send"===e?n:c.vn;p.transferFrom(o,a,r.toString()).then(function(){var r=(0,I.Z)(F().mark((function r(n){return F().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return f(n,{summary:"Send"===e?"Sent NFT!":"Burnt NFT"}),r.next=4,n.wait();case 4:t(n);case 5:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()).catch((function(t){4001===(null===t||void 0===t?void 0:t.code)?console.error("Transaction rejected.",t):console.error("".concat(e,"ing failed"),t),s(t)}))})));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return(0,d.useMemo)((function(){x("profile"===t?(0,i.uN)(c.qM[a],_,l,o):(0,i.uN)(c.X6[a],_,l,o))}),[t]),(0,d.useMemo)((function(){return l&&o&&a?o?{state:S.VALID,callback:m,error:null}:{state:S.INVALID,callback:null,error:null}:{state:S.INVALID,callback:null,error:"Missing dependencies"}}),[l,o,a,m,f])}(n,s,a,p),m=f.state,h=f.callback,v=(0,d.useState)(!1),b=v[0],j=v[1],g=(0,d.useState)(!0),N=g[0],w=g[1];(0,d.useEffect)((function(){m==S.INVALID&&j(!0)}),[m]),(0,d.useEffect)((function(){t&&(j(!1),w(!0),x(""))}),[t]);var O=(0,d.useState)(!1),k=O[0],D=O[1];return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(P,{onDismiss:function(){D((function(){return!1}))},isOpen:k,isError:b,action:n}),(0,y.jsxs)(o.u_,{isOpen:t,onDismiss:r,maxWidth:550,children:[(0,y.jsx)(o.xB,{title:"".concat(n," NFT"),onClose:r}),(0,y.jsxs)("p",{className:"text-blue-violet sm:text-base text-sm",children:["You'll ",n.toLowerCase()," your NFT."]}),"Send"===n&&(0,y.jsx)("input",{value:p,onChange:function(e){x(e.target.value),w(!!(0,i.UJ)(e.target.value)||""===e.target.value)},title:"Receiver address",autoComplete:"off",autoCorrect:"off",type:"text",placeholder:"Receiver address",className:"mt-6 relative font-normal outline-none border-none flex-auto overflow-hidden overflow-ellipsis placeholder-blue-violet focus:placeholder-alabaster dark:focus:placeholder-port-gore focus:font-bold text-alabaster dark:text-port-gore group-focus:bg-black-russian w-full p-3 rounded-box bg-black-russian dark:bg-white ring ring-blue-violet focus:ring focus:ring-blue-violet sm:text-lg text-lg"}),!N&&"Send"===n&&(0,y.jsx)("p",{className:"mt-1 text-red",children:"Address is not valid."}),(0,y.jsxs)("div",{className:"flex justify-between gap-x-6 mt-6",children:[(0,y.jsx)(o.zx,{className:"sm:text-base text-sm",onClick:function(){j(!1),"Send"===n?(0,i.UJ)(p)?(l(),D(!0),h().then(function(){var e=(0,I.Z)(F().mark((function e(t){return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:D(!1),r();case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(){j(!0)}))):w(!1):"Burn"===n&&(l(),D(!0),h().then(function(){var e=(0,I.Z)(F().mark((function e(t){return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:D(!1),r();case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(){j(!0)})))},variant:"accDisabled",children:n}),(0,y.jsx)(o.zx,{className:"sm:text-base text-sm text-black-russian dark:text-light",variant:"violet",onClick:r,children:"Close"})]})]})]})}!function(e){e[e.INVALID=0]="INVALID",e[e.LOADING=1]="LOADING",e[e.VALID=2]="VALID"}(S||(S={}));var Z=r(2942),C=r(41664);function L(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function T(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?L(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):L(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function W(){var e,t,r,x,f,m,h,v,b,j,g=(0,l.aQ)(),N=g.chainId,w=g.account,O=(0,l.LZ)(N&&c.qM[N]),S=(0,l.LZ)(N&&c.X6[N]),I=Number(null===(e=(0,u.Wk)(O,"balanceOf",[w]))||void 0===e||null===(t=e.result)||void 0===t?void 0:t[0]),D=Number(null===(r=(0,u.Wk)(S,"balanceOf",[w]))||void 0===r||null===(x=r.result)||void 0===x?void 0:x[0]),F=(0,u.es)(O,"tokenOfOwnerByIndex",(0,s.Z)(Array(I||0)).map((function(e,t){return[w,t]}))).map((function(e){var t;return Number(null===e||void 0===e||null===(t=e.result)||void 0===t?void 0:t[0])})),P=(0,u.es)(S,"tokenOfOwnerByIndex",(0,s.Z)(Array(D||0)).map((function(e,t){return[w,t]}))).map((function(e){var t;return Number(null===e||void 0===e||null===(t=e.result)||void 0===t?void 0:t[0])})),E=null===(f=(0,u.Wk)(O,"description"))||void 0===f||null===(m=f.result)||void 0===m?void 0:m[0],M=null===(h=(0,u.Wk)(S,"description"))||void 0===h||null===(v=h.result)||void 0===v?void 0:v[0],_=(0,d.useState)(!1),L=_[0],W=_[1],B=(0,d.useState)("Send"),V=B[0],z=B[1],G=(0,d.useState)("profile"),J=G[0],X=G[1],q=(0,d.useState)(""),H=q[0],R=q[1],Y=(0,d.useState)({profile:[],freeswap:[]}),U=Y[0],$=Y[1],Q=(0,d.useMemo)((function(){for(var e=0;e<F.length;e++)if(!(F[e]>=0))return[];return(0,s.Z)(F.map((function(e){return{seed:e,selected:U.profile.includes(e)}})))}),[F,U]),K=null===(b=(0,u.Wk)(S,"visualAppearance"))||void 0===b||null===(j=b.result)||void 0===j?void 0:j[0],ee=(0,d.useMemo)((function(){var e;try{e=JSON.parse(K)}catch(r){return[]}for(var t=0;t<P.length;t++)if(!(P[t]>=0))return[];return(0,s.Z)(P.map((function(t){var r,n,s,o,a;return{type:null===(r=e)||void 0===r?void 0:r.model_type,options:{edgeWear:null===(n=e)||void 0===n?void 0:n.edge_wear,surfaceWear:null===(s=e)||void 0===s?void 0:s.surface_wear,deformation:null===(o=e)||void 0===o?void 0:o.deformation,color:new p.Color(null===(a=e)||void 0===a?void 0:a.color),material:{metalness:.5}},selected:U.freeswap.includes(t)}})))}),[P,K,U]),te=(0,d.useMemo)((function(){for(var e=[],t=0;t<F.length;t++)F[t]&&e.push({nftId:F[t],type:"profile",title:JSON.parse(E).title,description:JSON.parse(E).description});for(var r=0;r<P.length;r++)P[r]&&e.push({nftId:P[r],type:"freeswap",title:JSON.parse(M).title,description:JSON.parse(M).description});return e}),[F,P,E,M]);return(0,y.jsxs)(o.W2,{id:"profile-page",className:"px-5",maxWidth:"7xl",children:[(0,y.jsxs)(a.default,{children:[(0,y.jsx)("title",{children:"Gem | Ruby.Exchange"}),(0,y.jsx)("meta",{name:"description",content:"Profile page."},"description")]}),(0,y.jsx)("div",{className:"my-8",children:(0,y.jsx)(o.eJ,{})}),(0,i.lN)()?ee.length||Q.length?(0,y.jsx)("div",{className:"h-screen",children:(0,y.jsx)(k,{generativeGems:Q,cutGems:ee})}):"":(0,y.jsx)("p",{className:"text-center text-3xl text-alabaster dark:text-port-gore font-semibold capitalize my-48",children:"Your Browser Does Not Support WebGL"}),(0,y.jsx)(A,{isOpen:L,action:V,close:function(){W(!1)},type:J,tokenId:H,closeModal:function(){return W(!1)}}),(0,y.jsxs)("div",{className:"mt-6 xl:mb-6 mb-24 border border-blue-violet rounded-box",children:[(0,y.jsx)("div",{className:"flex bg-port-gore dark:bg-light p-4 rounded-box rounded-b-none",children:(0,y.jsx)("p",{className:"border-b border-amaranth text-alabaster dark:text-port-gore font-semibold sm:text-base text-sm cursor-pointer",children:"Your NFTs"})}),(0,y.jsxs)("div",{className:"p-5",children:[(null===te||void 0===te?void 0:te.length)>0?(0,y.jsxs)("div",{className:"grid md:grid-cols-12 grid-cols-2 gap-x-12 sm:text-base text-sm font-normal dark:text-port-gore text-alabaster px-3.5 rounded-box",children:[(0,y.jsx)("p",{className:"md:col-span-1",children:"Select"}),(0,y.jsx)("p",{className:"md:col-span-2",children:"Title"}),(0,y.jsx)("p",{className:"md:col-span-6",children:"Description"}),(0,y.jsx)("p",{className:"md:col-span-3 md:text-center",children:"Action"})]}):w?I+D==0?(0,y.jsx)("p",{className:"text-alabaster dark:text-port-gore text-xl text-center my-6",children:"You have no NFTs."}):(0,y.jsx)("p",{className:"text-alabaster dark:text-port-gore text-xl text-center my-6",children:(0,y.jsx)(o.bb,{children:"Loading your NFTs"})}):(0,y.jsx)("p",{className:"text-alabaster dark:text-port-gore text-xl text-center my-6",children:"Please connect your walllet"}),te&&te.map((function(e,t){return(0,y.jsxs)("div",{className:"grid md:grid-cols-12 grid-cols-2 gap-x-12 border border-blue-violet rounded-box p-3.5 font-medium sm:text-base text-sm dark:text-port-gore text-alabaster mt-2.5 items-center",children:[(0,y.jsx)("div",{className:"md:col-span-1 md:text-center",children:(0,y.jsx)("input",{type:"checkbox",className:"sm:w-6 sm:h-6 w-5 h-5 hover:cursor-pointer",onChange:function(t){return function(e,t,r){r.target.checked?$((function(r){return T(T({},r),{},(0,n.Z)({},e,[].concat((0,s.Z)(r[e]),[t])))})):$((function(r){return T(T({},r),{},(0,n.Z)({},e,r[e].filter((function(e){return e!==t}))))}))}(e.type,e.nftId,t)}})}),(0,y.jsx)("p",{className:"md:col-span-2 capitalize",children:"".concat(e.title," #").concat(e.nftId)}),(0,y.jsx)("p",{className:"md:col-span-6",children:"".concat(e.description)}),(0,y.jsxs)("div",{className:"md:col-span-3 flex lg:flex-row md:text-center flex-col justify-between",children:[(0,y.jsx)("p",{className:"cursor-pointer hover:underline",onClick:function(){R(e.nftId),z("Send"),X(e.type),W(!0)},children:"Send"}),(0,y.jsx)("p",{className:"cursor-pointer hover:underline",onClick:function(){R(e.nftId),z("Burn"),X(e.type),W(!0)},children:"Burn"}),(0,y.jsx)(C.default,{passHref:!0,href:(0,i.t5)(N,"profile"===e.type?c.qM[N]:c.X6[N],e.nftId),children:(0,y.jsxs)("p",{className:"cursor-pointer hover:underline flex md:justify-center",children:["View ",(0,y.jsx)(Z.tEF,{className:"mx-1 sm:w-5 sm:h-5 w-4 h-4 my-auto hover:rotate-180 duration-300 cursor-pointer"})]})})]})]},t)}))]})]})]})}W.Guard=(0,o.hJ)([i.a_.EUROPA]);var B=W},64517:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/profile/nfts",function(){return r(87234)}])}},function(e){e.O(0,[3737,5611,6364,6064,9774,2888,179],(function(){return t=64517,e(e.s=t);var t}));var t=e.O();_N_E=t}]);