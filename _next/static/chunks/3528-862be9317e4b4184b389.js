"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3528],{69896:function(e,t,n){n.d(t,{pM:function(){return f},ht:function(){return x}});var r=n(80318),s=n(99548),a=n(84501),i=(n(67294),n(74891)),o=n(33646),l=n(28269),c=n(13369),u=n(20181),d=n(85893),m=function(e){var t=e.onDismiss,n=e.pendingText,s=(0,u.m$)(),a=(0,r.Z)(s,1)[0];return(0,d.jsxs)("div",{children:[(0,d.jsx)("div",{className:"flex justify-end",children:(0,d.jsx)(i.Tw,{onClick:t})}),(0,d.jsx)("div",{className:"w-24 pb-4 m-auto flex justify-center",children:(0,d.jsxs)("svg",{className:"animate-spin",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,d.jsx)("circle",{className:"opacity-30",cx:"12",cy:"12",r:"10",stroke:"#6E67B6",strokeWidth:"4"}),(0,d.jsx)("path",{className:"opacity-75",fill:a?"#231E58":"#F3F2FF",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}),(0,d.jsxs)("div",{className:"flex flex-col items-center justify-center gap-3",children:[(0,d.jsx)("div",{className:"sm:text-xl text-lg font-semibold text-alabaster dark:text-port-gore",children:"Waiting for Confirmation"}),(0,d.jsx)("div",{className:"sm:text-base text-xs text-alabaster dark:text-port-gore",children:n}),(0,d.jsx)("div",{className:"sm:text-sm text-xs font-bold text-alabaster dark:text-port-gore",children:"Confirm this transaction in your wallet."}),(0,d.jsx)("div",{className:"sm:text-sm text-xs font-bold text-alabaster dark:text-port-gore -mt-3",children:"You can close this dialog after confirming."})]})]})},p=function(e){var t,n=e.onDismiss,r=e.chainId,a=e.hash,u=e.currencyToAdd,m=(0,l.a)().library,p=(0,c.Z)(u),f=p.addToken,x=p.success;return(0,d.jsxs)("div",{children:[(0,d.jsx)("div",{className:"flex justify-end hover:text-alabaster dark:hover:text-port-gore",children:(0,d.jsx)(i.Tw,{onClick:n})}),(0,d.jsx)("div",{className:"w-24 pb-4 m-auto",children:(0,d.jsx)(s.Z,{strokeWidth:.5,size:90,className:"text-blue"})}),(0,d.jsxs)("div",{className:"flex flex-col items-center justify-center gap-1",children:[(0,d.jsx)("div",{className:"sm:text-xl text-lg font-bold text-alabaster dark:text-port-gore",children:"Transaction Submitted"}),r&&a&&(0,d.jsx)(i.dL,{href:(0,o.E)(r,a,"transaction"),children:(0,d.jsx)("div",{className:"font-bold text-blue sm:text-base text-sm",children:"View on explorer"})}),u&&(null===m||void 0===m||null===(t=m.provider)||void 0===t?void 0:t.isMetaMask)&&(0,d.jsx)(i.zx,{variant:"gradient",onClick:f,className:"w-auto mt-4 font-semibold",children:x?(0,d.jsxs)(i.bs,{children:["Added ",u.symbol]}):(0,d.jsxs)(i.bs,{className:"mx-auto space-x-2",children:[(0,d.jsx)("span",{children:"Add ".concat(u.symbol," to MetaMask")}),(0,d.jsx)("img",{src:"/images/wallets/metamask.png",alt:"Add ".concat(u.symbol," to MetaMask"),width:20,height:20,className:"ml-1"})]})})]})]})},f=function(e){var t=e.title,n=e.bottomContent,r=e.onDismiss,s=e.topContent;return(0,d.jsxs)("div",{className:"grid gap-4",children:[(0,d.jsx)(i.xB,{title:t,onClose:r}),s(),n()]})},x=function(e){var t=e.message,n=e.onDismiss;return(0,d.jsxs)("div",{className:"grid gap-6",children:[(0,d.jsxs)("div",{children:[(0,d.jsxs)("div",{className:"flex justify-between",children:[(0,d.jsx)("div",{className:"text-lg font-medium text-alabaster",children:"Error"}),(0,d.jsx)(i.Tw,{onClick:n})]}),(0,d.jsxs)("div",{className:"flex flex-col items-center justify-center gap-3",children:[(0,d.jsx)(a.Z,{className:"text-red",style:{strokeWidth:1.5},size:64}),(0,d.jsx)("div",{className:"font-bold text-red",children:t})]})]}),(0,d.jsx)("div",{children:(0,d.jsx)(i.zx,{color:"gradient",size:"lg",onClick:n,children:"Dismiss"})})]})};t.ZP=function(e){var t=e.isOpen,n=e.onDismiss,r=e.attemptingTxn,s=e.hash,a=e.pendingText,o=e.content,c=e.currencyToAdd,u=(0,l.a)().chainId;return u?(0,d.jsx)(i.u_,{isOpen:t,onDismiss:n,maxHeight:90,maxWidth:500,children:r?(0,d.jsx)(m,{onDismiss:n,pendingText:a}):s?(0,d.jsx)(p,{chainId:u,hash:s,onDismiss:n,currencyToAdd:c}):t?o():null}):null}},86154:function(e,t,n){n.d(t,{Ui:function(){return T},m$:function(){return P}});var r=n(80318),s=n(92809),a=n(30266),i=n(809),o=n.n(i),l=n(73052),c=n(67294),u=n(99123),d=n(29268),m=n(26367),p=n(89231),f=n(28269),x=n(21046),h={adminFee:x._Y,aParameter:x._Y,apy:null,name:"",reserve:null,swapFee:x._Y,tokens:[],totalLocked:x._Y,utilization:null,virtualPrice:x._Y,volume:null,aprs:{},lpTokenPriceUSD:x._Y,lpToken:"",isPaused:!1,isMigrated:!1,rubyPerDay:null},v=n(1427),b=n(2593),k=n(9279),w=n(77616),y=n(36400),j=n(37526);function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){(0,s.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function P(){return(0,d.C)((function(e){return e.stablePool}))}function T(e){var t=(0,f.a)(),n=t.account,i=t.chainId,g=t.library,T=(0,v.tZ)(e),N=(0,v.Bl)(),D=P(),S=D.tokenPricesUSD,A=D.lastTransactionTimes,_=D.swapStats,C=function(e,t,n){var r=p.YM[e],i=(0,d.T)(),m=(0,u.h7)(),f=(0,v.sg)(e),h=(0,d.C)((function(e){return e.user})).infiniteApproval,k=(0,v.Bl)(),w=n&&r?r.rewardPids[n]:null,y=(0,c.useState)(x._Y),g=y[0],O=y[1],T=P().lastTransactionTimes[p.L0.STAKE_OR_CLAIM],N=(0,c.useCallback)(function(){var e=(0,a.Z)(o().mark((function e(n){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(f&&k&&t&&null!==w){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,(0,j.S_)(f,k.address,t,n,h,b.O$.from(1));case 5:return e.next=7,k.deposit(w,n,t);case 7:return r=e.sent,m(r,{summary:"Depositing to Rewards Pool"}),e.next=11,r.wait();case 11:i((0,l.k2)({transactionTimes:(0,s.Z)({},p.L0.STAKE_OR_CLAIM,Date.now())})),e.next=18;break;case 14:throw e.prev=14,e.t0=e.catch(2),console.error(e.t0),new Error("Depositing to Rewards Pool failed");case 18:case"end":return e.stop()}}),e,null,[[2,14]])})));return function(t){return e.apply(this,arguments)}}(),[f,k,t,h,w,i]),D=(0,c.useCallback)(function(){var e=(0,a.Z)(o().mark((function e(n){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(f&&k&&t&&null!==w){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,k.withdraw(w,n,t);case 5:return r=e.sent,e.next=8,r.wait();case 8:i((0,l.k2)({transactionTimes:(0,s.Z)({},p.L0.STAKE_OR_CLAIM,Date.now())})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),console.error(e.t0);case 14:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t){return e.apply(this,arguments)}}(),[f,k,t,w,i]);return(0,c.useEffect)((function(){function e(){return(e=(0,a.Z)(o().mark((function e(){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(k&&t&&null!==w){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,k.userInfo(w,t).catch(console.error);case 4:n=e.sent,O(n?n.amount:x._Y);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[t,w,k,T]),{approveAndStake:N,unstake:D,amountStaked:g,isPoolIncentivized:null!==w}}(e,n,i).amountStaked,Z=A[p.L0.DEPOSIT],M=A[p.L0.WITHDRAW],E=A[p.L0.SWAP],L=A[p.L0.STAKE_OR_CLAIM],$=(0,c.useState)([O(O({},h),{},{name:e||""}),null]),I=$[0],z=$[1];function Y(e,t){return e.mul(b.O$.from(10).pow(18)).div(t.isZero()?b.O$.from("1"):t)}return(0,c.useEffect)((function(){function t(){return(t=(0,a.Z)(o().mark((function t(){var s,l,c,u,d,f,h,v,j,O,P,D,A,Z,M,E,L,$,I,F,B,U,W,R,V,K,H,X,q,G,J,Q,ee,te,ne,re,se,ae,ie,oe,le,ce,ue,de,me;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!=e&&null!=T&&null!=S&&null!=g&&null!=i){t.next=2;break}return t.abrupt("return");case 2:if(t.prev=2,(s=p.YM[e]).addresses[i]){t.next=6;break}return t.abrupt("return");case 6:return l=s.underlyingPoolTokens||s.poolTokens,c=null!=s.metaSwapAddresses,u=s.rewardPids[i],d=T,t.next=12,Promise.all([d.swapStorage(),d.getA(),d.paused()]);case 12:return f=t.sent,h=(0,r.Z)(f,3),v=h[0],j=h[1],O=h[2],P=v.adminFee,D=v.lpToken,A=v.swapFee,Z=(0,m.uN)(D,y,g,null!==n&&void 0!==n?n:void 0),t.next=21,Promise.all([Z.balanceOf(n||k.d),Z.totalSupply()]);case 21:if(M=t.sent,E=(0,r.Z)(M,2),L=E[0],!($=E[1]).isZero()){t.next=29;break}t.t0=b.O$.from(10).pow(18),t.next=32;break;case 29:return t.next=31,d.getVirtualPrice();case 31:t.t0=t.sent;case 32:return I=t.t0,t.next=35,Promise.all(l.map(function(){var e=(0,a.Z)(o().mark((function e(t,n){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.getTokenBalance(n);case 2:return r=e.sent,e.abrupt("return",b.O$.from(10).pow(18-t[i].decimals).mul(r));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 35:if(F=t.sent,B=F.reduce((function(e,t){return e.add(t)})),U=l.map((function(e,t,n){var r=c&&t===n.length-1?(0,p.w)(s.type):e[i].symbol;return F[t].mul(w.parseUnits(String(S[r]||0),18)).div(b.O$.from(10).pow(18))})),W=U.reduce((function(e,t){return e.add(t)})),R=B.isZero()?x._Y:W.mul(b.O$.from(10).pow(18)).div(B),V=Y(L,$).add(Y(C,$)),K=F.map((function(e){return V.mul(e).div(b.O$.from(10).pow(18))})),H=K.reduce((function(e,t){return e.add(t)})),X=U.map((function(e){return V.mul(e).div(b.O$.from(10).pow(18))})),q=X.reduce((function(e,t){return e.add(t)})),G=l.map((function(e,t){return{symbol:e[i].symbol,percent:(0,m.X3)(F[t].mul(Math.pow(10,5)).div($.isZero()?b.O$.from("1"):B),5),value:F[t]}})),J=l.map((function(e,t){return{symbol:e[i].symbol,percent:(0,m.X3)(F[t].mul(Math.pow(10,5)).div($.isZero()?b.O$.from("1"):B),5),value:K[t]}})),Q=s.addresses[i].toLowerCase(),ee=_&&Q in _?_[Q]:{oneDayVolume:null,apy:null,utilization:null},te=ee.oneDayVolume,ne=ee.apy,re=ee.utilization,se=null,!N||null===u){t.next=61;break}return t.next=53,Promise.all([N.poolInfo(u),N.rubyPerSecond(),N.totalAllocPoint()]);case 53:ae=t.sent,ie=(0,r.Z)(ae,3),oe=ie[0],le=ie[1],ce=ie[2],ue=oe.allocPoint,de=b.O$.from(86400),se=le.mul(de).mul(ue).div(ce);case 61:!1,me={name:e,tokens:G,reserve:W,totalLocked:$,virtualPrice:I,adminFee:P,swapFee:A,aParameter:j,volume:te?w.parseUnits(te,18):null,utilization:re?w.parseUnits(re,18):null,apy:ne?w.parseUnits(ne,18):null,lpTokenPriceUSD:R,lpToken:s.lpToken[i].symbol,isPaused:O,isMigrated:false,rubyPerDay:se},z([me,n?{name:e,share:V,underlyingTokensAmount:H,usdBalance:q,tokens:J,lpTokenBalance:L}:null]),t.next=69;break;case 67:t.prev=67,t.t1=t.catch(2);case 69:case"end":return t.stop()}}),t,null,[[2,67]])})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[Z,M,E,L,e,T,S,_,N,C]),I}}}]);