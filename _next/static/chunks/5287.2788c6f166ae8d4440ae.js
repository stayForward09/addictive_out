(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5287],{94089:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return M}});var r=n(30266),a=n(809),s=n.n(a),i=n(47786),o=n(80318),c=n(3283),l=n.n(c),u=n(26367),f=n(28269),m=n(67294),d=n(99123),x=n(73574),p=function(e){var t,n=e.gasAmount,r=e.nonceAddressXOR,a=e.divConstant,s=function(){var e=new Uint8Array(32),t=self.crypto.getRandomValues(e).reduce((function(e,t){return e+("00"+t.toString(16)).slice(-2)}),"");return BigInt("0x".concat(t))};function i(e){var t=e.replace(" ","");return""==t?"":t.match(/.{2}/g).map((function(e){return parseInt(e,16)}))}for(;;){t=s();var o=keccak256(i(t.toString(16)));if(a/(r^BigInt("0x".concat(o)))>=n)break}return t.toString()},h=n(44958),g=n(1427),v=n(70697),N=n(83849),b=Object.prototype.hasOwnProperty;function w(e,t){var n,r;if(e===t)return!0;if(e&&t&&(n=e.constructor)===t.constructor){if(n===Date)return e.getTime()===t.getTime();if(n===RegExp)return e.toString()===t.toString();if(n===Array){if((r=e.length)===t.length)for(;r--&&w(e[r],t[r]););return-1===r}if(!n||"object"===typeof e){for(n in r=0,e){if(b.call(e,n)&&++r&&!b.call(t,n))return!1;if(!(n in t)||!w(e[n],t[n]))return!1}return Object.keys(t).length===r}}return e!==e&&t!==t}var E,I,k=function(e){return function(t){return Promise.resolve(e.fn.apply(e,t.data[0])).then((function(t){var n,r="auto"===e.transferable&&(n=t,"ArrayBuffer"in self&&n instanceof ArrayBuffer||"MessagePort"in self&&n instanceof MessagePort||"ImageBitmap"in self&&n instanceof ImageBitmap||"OffscreenCanvas"in self&&n instanceof OffscreenCanvas)?[t]:[];postMessage(["SUCCESS",t],r)})).catch((function(e){postMessage(["ERROR",e])}))}},R=function(e,t,n){var r="\n    "+function(e){return 0===e.length?"":"importScripts("+e.map((function(e){return"'"+e+"'"})).toString()+")"}(t)+";\n    onmessage=("+k+")({\n      fn: ("+e+"),\n      transferable: '"+n+"'\n    })\n  ",a=new Blob([r],{type:"text/javascript"});return URL.createObjectURL(a)};(I=E||(E={})).PENDING="PENDING",I.SUCCESS="SUCCESS",I.RUNNING="RUNNING",I.ERROR="ERROR",I.TIMEOUT_EXPIRED="TIMEOUT_EXPIRED";var j,y=E;!function(e){e.AUTO="auto",e.NONE="none"}(j||(j={}));var A,D={timeout:void 0,remoteDependencies:[],autoTerminate:!0,transferable:j.AUTO},O=function(e,t){void 0===t&&(t=D);var n,r,a,s=m.useState(y.PENDING),i=s[0],o=s[1],c=m.useRef(),l=m.useRef(!1),u=m.useRef({}),f=m.useRef(),d=m.useCallback((function(e){l.current=e===y.RUNNING,o(e)}),[]),x=m.useCallback((function(){var e;null!==(e=c.current)&&void 0!==e&&e._url&&(c.current.terminate(),URL.revokeObjectURL(c.current._url),u.current={},c.current=void 0,window.clearTimeout(f.current))}),[]),p=m.useCallback((function(e){(null!=t.autoTerminate?t.autoTerminate:D.autoTerminate)&&x(),d(e)}),[t.autoTerminate,x,d]),h=(n=function(){var n=t.remoteDependencies,r=t.timeout,a=void 0===r?D.timeout:r,s=t.transferable,i=R(e,void 0===n?D.remoteDependencies:n,void 0===s?D.transferable:s),o=new Worker(i);return o._url=i,o.onmessage=function(e){var t,n,r,a,s=e.data,i=s[1];switch(s[0]){case y.SUCCESS:null===(t=(n=u.current).resolve)||void 0===t||t.call(n,i),p(y.SUCCESS);break;default:null===(r=(a=u.current).reject)||void 0===r||r.call(a,i),p(y.ERROR)}},o.onerror=function(e){var t,n;null===(t=(n=u.current).reject)||void 0===t||t.call(n,e),p(y.ERROR)},a&&(f.current=window.setTimeout((function(){x(),d(y.TIMEOUT_EXPIRED)}),a)),o},w((a=m.useRef(r=[e,t,x])).current,r)||(a.current=r),m.useCallback(n,a.current)),g=m.useCallback((function(){var e=[].slice.call(arguments),n=t,r=n.transferable,a=void 0===r?D.transferable:r;return new Promise((function(t,n){var r,s;u.current=((r={}).resolve=t,r.reject=n,r);var i=a===j.AUTO?e.filter((function(e){return"ArrayBuffer"in window&&e instanceof ArrayBuffer||"MessagePort"in window&&e instanceof MessagePort||"ImageBitmap"in window&&e instanceof ImageBitmap||"OffscreenCanvas"in window&&e instanceof OffscreenCanvas})):[];null===(s=c.current)||void 0===s||s.postMessage([[].concat(e)],i),d(y.RUNNING)}))}),[d]),v=m.useCallback((function(){var e=null!=t.autoTerminate?t.autoTerminate:D.autoTerminate;return l.current?(console.error("[useWorker] You can only run one instance of the worker at a time, if you want to run more than one in parallel, create another instance with the hook useWorker(). Read more: https://github.com/alewin/useWorker"),Promise.reject()):(!e&&c.current||(c.current=h()),g.apply(void 0,[].slice.call(arguments)))}),[t.autoTerminate,h,g]),N={status:i,kill:x};return m.useEffect((function(){return function(){x()}}),[x]),[v,N]},S=n(13550),C=n.n(S);!function(e){e[e.INVALID=0]="INVALID",e[e.LOADING=1]="LOADING",e[e.VALID=2]="VALID"}(A||(A={}));var U=new(C())(1);var T=n(30463),L=n(72319),P=n(74891),B=n(20181),F=n(85893),G=function(e){var t=e.onDismiss,n=e.isOpen,r=e.isError,a=(0,B.m$)(),s=(0,o.Z)(a,1)[0];return(0,F.jsx)(P.u_,{isOpen:n,onDismiss:function(){},maxHeight:90,children:(0,F.jsxs)("div",{children:[(0,F.jsx)("div",{className:"flex justify-end",children:(0,F.jsx)(P.Tw,{onClick:t})}),!r&&(0,F.jsx)("div",{className:"w-24 pb-4 m-auto flex justify-center",children:(0,F.jsxs)("svg",{className:"animate-spin",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,F.jsx)("circle",{className:"opacity-30",cx:"12",cy:"12",r:"10",stroke:"#6E67B6",strokeWidth:"4"}),(0,F.jsx)("path",{className:"opacity-75",fill:s?"#231E58":"#F3F2FF",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}),r?(0,F.jsxs)("div",{className:"flex flex-col items-center justify-center gap-3",children:[(0,F.jsx)("p",{className:"sm:text-xl text-lg font-semibold text-alabaster dark:text-port-gore",children:"Faucet Error"}),(0,F.jsx)("p",{className:"sm:text-sm text-xs font-bold text-alabaster dark:text-port-gore",children:"An error occurred while generating sFUEL."})]}):(0,F.jsxs)("div",{className:"flex flex-col items-center justify-center gap-3",children:[(0,F.jsx)("p",{className:"sm:text-xl text-lg font-semibold text-alabaster dark:text-port-gore",children:"Mining sFUEL"}),(0,F.jsx)("p",{className:"sm:text-sm text-xs font-bold text-alabaster dark:text-port-gore",children:"Please wait while your sFUEL is generated."})]})]})})};function M(e){var t=e.isOpen,n=e.close,a=(0,T.aQ)().account,c=(0,L.AE)([a]),b=function(){var e=(0,f.a)(),t=e.account,n=e.library,a=u.a_.EUROPA,i=(0,d.h7)(),c=(0,g.AF)(),b=O(p,{timeout:3e4,remoteDependencies:["".concat(location.origin,"/scripts/sha3.min.js")]}),w=(0,o.Z)(b,2),I=w[0],k=w[1].status,R=(0,m.useState)(E.PENDING),j=R[0],y=R[1];function D(){return S.apply(this,arguments)}function S(){return(S=(0,r.Z)(s().mark((function e(){var r,o,c,u,f,m,d,p,g,b,w,k,R,j;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.Wallet.createRandom(),o=r.address,r=r.connect(n.getSigner().provider),e.next=5,n.getTransactionCount(o);case 5:return c=e.sent,u=new(l())(x.rP[a]),f=new u.eth.Contract(N,v.w6[a]),e.next=10,f.methods.mint(t).estimateGas({from:o,chainId:a,data:f.methods.mint(t).encodeABI(),nonce:c});case 10:return m=e.sent,d=new(C())(u.utils.soliditySha3(c).slice(2),16),p=new(C())(u.utils.soliditySha3(o).slice(2),16),g=d.xor(p),b=new(C())(2).pow(new(C())(256)).sub(new(C())(1)),w=b.div(U),y(E.RUNNING),e.next=19,I({gasAmount:m,nonceAddressXOR:BigInt(g.toString()),divConstant:BigInt(w.toString())});case 19:return k=e.sent,y(E.PENDING),e.t0=o,e.t1=a,e.next=25,f.methods.mint(t).encodeABI();case 25:return e.t2=e.sent,e.t3=c,e.t4=new(C())(m),e.t5=new(C())(k),e.t6=v.w6[a],R={from:e.t0,chainId:e.t1,data:e.t2,nonce:e.t3,gasLimit:e.t4,gasPrice:e.t5,value:0,to:e.t6},e.next=33,u.eth.accounts.signTransaction(R,r._signingKey().privateKey);case 33:return j=e.sent,e.abrupt("return",new Promise((function(e,t){u.eth.sendSignedTransaction(j.rawTransaction).then((function(t){i({hash:t.transactionHash},{summary:"Minted sFUEL!"}),e(t)})).catch((function(e){4001===(null===e||void 0===e?void 0:e.code)?console.error("Transaction rejected.",e):console.error("Minting failed",e),t(e)}))})));case 35:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var T=function(){y(E.PENDING)};return(0,m.useMemo)((function(){return n&&t&&a?t?k==E.TIMEOUT_EXPIRED&&j!=E.PENDING?{state:A.INVALID,callback:null,error:"Worker timeout",initialize:T}:k==E.ERROR&&j!=E.PENDING?{state:A.INVALID,callback:null,error:"Worker internal error",initialize:T}:{state:A.VALID,callback:D,error:null,initialize:T}:{state:A.INVALID,callback:null,error:null,initialize:T}:{state:A.INVALID,callback:null,error:"Missing dependencies",initialize:T}}),[n,t,a,c,i,I,k,j])}(),w=b.state,I=b.callback,k=(b.error,b.initialize),R=c[a],j=(0,m.useState)(!1),y=j[0],D=j[1],S=(0,m.useState)(!1),B=S[0],M=S[1];(0,m.useEffect)((function(){t&&D(!1)}),[t]);return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(G,{onDismiss:function(){M(!1),k()},isOpen:B,isError:w==A.INVALID||y}),(0,F.jsxs)(P.u_,{isOpen:t,onDismiss:n,maxWidth:500,children:[(0,F.jsx)(P.xB,{title:"sFUEL Gas Faucet",onClose:n}),(0,F.jsx)("p",{className:"text-blue-violet sm:text-base text-sm",children:"You'll need some sFUEL (SKALE's gas token) to make transactions on Ruby's SKALE chain. sFUEL has no market value and gas fees are very low, so a little should last a long time. You can top up your balance with sFUEL from the faucet."}),(0,F.jsx)("div",{className:"my-6 bg-port-gore dark:bg-white p-5 rounded-box text-center",children:(0,F.jsxs)("p",{className:"text-alabaster dark:text-port-gore sm:text-2xl text-xl px-2.5",children:["Your balance:",(0,F.jsxs)("span",{className:"font-semibold",children:[" ",(0,i.ZO)(R,4)," sFUEL"]})]})}),a?(0,F.jsxs)("div",{className:"flex justify-between gap-x-6",children:[(0,F.jsx)(P.zx,{className:"sm:text-base text-sm",onClick:function(){D(!1),M(!0),I().then(function(){var e=(0,r.Z)(s().mark((function e(t){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:M(!1),n();case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(){D(!0)}))},variant:"accDisabled",children:"get sfuel"}),(0,F.jsx)(P.zx,{className:"sm:text-base text-sm text-black-russian dark:text-light",variant:"violet",onClick:n,children:"Close"})]}):(0,F.jsx)(P.ck,{className:"w-full sm:text-base text-sm text-black-russian dark:text-alabaster",variant:"gradient"})]})]})}},89214:function(){},52361:function(){},94616:function(){}}]);